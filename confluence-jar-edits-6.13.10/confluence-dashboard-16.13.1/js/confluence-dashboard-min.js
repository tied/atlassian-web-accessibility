define("confluence-dashboard/utils/event-manager",["module","exports","backbone","marionette"],function(e,t,o,n){"use strict";var i,a=o.Wreqr;(i=n,i&&i.__esModule?i:{default:i}).default;var r=a.radio.channel("global");t.default={EventManager:r.vent,Commands:r.commands,ReqRes:r.reqres},e.exports=t.default}),define("confluence-dashboard/behaviors/aui-sidebar-resizable",["module","exports","marionette","../utils/event-manager","jquery","ajs","confluence/storage-manager"],function(e,t,o,n,i,a,r){"use strict";var s=o.Behavior,l=n.EventManager,c=f(i).default,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({ui:{resizeHandle:".aui-sidebar-handle"},events:{"mousedown @ui.resizeHandle":"onResizeStart","mouseup @ui.resizeHandle":"onResizeEnd"},dragging:!1,initialize:function(){this.EXPANDED_SIZE=280,this.sidebarSettings=d("confluence","sidebar"),this.listenTo(this.view,"sidebar-attached",this.createAuiSidebar,this),this.listenTo(l,"window:resize",this.resetSidebar,this)},createAuiSidebar:function(){var e=this;this.AUISidebar=u.sidebar(this.view.$el.selector),this.AUISidebar.on("expand-start.sidebar",function(){return e.onExpand()}),this.AUISidebar.on("collapse-start.sidebar",function(){return e.onCollapse()}),this.$footer=c("#footer, #studio-footer"),this.currentWidth=parseInt(this.sidebarSettings.getItem("width")),this.setInitialState()},resetSidebar:function(){var e=c("body").hasClass("aui-sidebar-collapsed"),t=this.AUISidebar.$el.hasClass("aui-sidebar-fly-out");e&&!t?this.AUISidebar.collapse():this.isFlyOut()||this.AUISidebar.isCollapsed()||this.setPanelWidth(this.EXPANDED_SIZE,this.EXPANDED_SIZE)},setInitialState:function(){this.currentWidth?(this.currentWidth>130&&(this.EXPANDED_SIZE=this.currentWidth),this.adjustSize()):this.currentWidth=280},onBeforeDestroy:function(){this.AUISidebar.off(".sidebar")},triggerToggleSidebar:function(e){l.trigger("sidebar:"+e)},isFlyOut:function(){return 1240>window.innerWidth},onExpand:function(){this.triggerToggleSidebar("expand"),this.setPanelWidth(this.EXPANDED_SIZE,this.EXPANDED_SIZE),this.persistSidebarSize(),c(".aui-sidebar").addClass("expanded"),c("a.aui-sidebar-toggle").attr("aria-expanded","true")},onCollapse:function(){this.EXPANDED_SIZE=this.currentWidth<130?280:this.currentWidth,this.triggerToggleSidebar("collapse"),this.setPanelWidth(55,"inherit"),this.persistSidebarSize(),c(".aui-sidebar").removeClass("expanded"),c("a.aui-sidebar-toggle").attr("aria-expanded","false")},onResizeStart:function(e){var t=this;e.preventDefault(),this.AUISidebar.$body.on("mousemove.sidebar",function(e){var o=e.pageX;t.dragging=!0,o>130&&(t.EXPANDED_SIZE=o),t.adjustSize(),o>55&&o<640&&t.setPanelWidth(o)}),this.AUISidebar.$body.one("mouseup.sidebar",function(){return t.onResizeEnd()})},onResizeEnd:function(){this.AUISidebar.$body.off(".sidebar"),this.dragging?(this.adjustSize(),this.persistSidebarSize(),this.dragging=!1):this.AUISidebar.toggle()},setPanelWidth:function(e,t){var o=e+"px",n=o;this.isFlyOut()&&(n="55px"),this.AUISidebar.$wrapper.css({width:o,maxWidth:t||o}),this.AUISidebar.$el.siblings(".aui-page-panel").css({paddingLeft:n}),this.$footer.css("padding-left",n),this.currentWidth=e},persistSidebarSize:function(){this.sidebarSettings.setItemQuietly("width",this.currentWidth)},_collapse:function(){this.AUISidebar.isCollapsed()?this.onCollapse():this.AUISidebar.collapse()},_expand:function(){this.AUISidebar.isCollapsed()?this.AUISidebar.expand():this.onExpand()},adjustSize:function(){this.currentWidth<130?this._collapse():this._expand()}}),e.exports=t.default}),define("configuration",["ajs","confluence/meta"],function(e,t){var o=e.contextPath(),n="com.atlassian.confluence.plugins.confluence-dashboard";return{apiLimit:20,visibleItemLimit:200,pluginKey:n,staticResourceUrl:t.get("static-resource-url-prefix")+"/download/resources/"+n+":confluence-dashboard-resources",backboneHistoryConfig:{pushState:!1,root:o+"/dashboard.action",silent:!1},DARK_FEATURES:{USER_DISABLED_DASHBOARD_DARK_FEATURE:"simple.dashboard.disabled",RECOMMENDED_FOR_YOU_DARK_FEATURE:"recommended.for.you"},endpoints:{ALL_UPDATES:o+"/rest/dashboardmacros/1.0/updates",POPULAR_STREAM:o+"/rest/popular/1/stream/content?days=7&pageSize=20",RECOMMENDED_STREAM:o+"/rest/recommender/1.0/stream/content",RECENTLY_VIEWED:o+"/rest/api/content/search",RECENTLY_WORKED:o+"/rest/api/content/search",STARRED:o+"/rest/api/content/search",FAVOURITE_SPACES:o+"/rest/experimental/search?cql=type=space and space.type=favourite order by favourite desc&expand=space.icon&limit=100",ALL_SPACES:o+"/rest/experimental/search?cql=type = space&expand=space.icon",TOGGLE_FAVOURITE_SPACE:function(e){return o+"/rest/experimental/relation/user/current/favourite/toSpace/"+e},WEB_ITEMS:function(e){return t.get("static-resource-url-prefix")+"/download/resources/com.atlassian.confluence.plugins.confluence-dashboard:confluence-dashboard-nav-items/api/web-items/"+e+".json"},ADD_FAVOURITE:o+"/json/addfavourite.action",REMOVE_FAVOURITE:o+"/json/removefavourite.action",FEATURE_DISCOVERY:o+"/rest/feature-discovery/latest/discovered"},sections:{webItems:{sidebar:{MY_WORK:"my-work",DISCOVER:"discover",MY_SPACES:"my-spaces",MY_TEAM:"my-team"}}},URLS:{LOGIN_PAGE:o+"/login.action"}}}),define("confluence-dashboard/utils/dark-features",["module","exports","confluence/dark-features","confluence/api/ajax","ajs","jquery"],function(e,t,o,n,i,a){"use strict";var r=u(o).default,s=u(n).default,l=u(i).default,c=u(a).default;function u(e){return e&&e.__esModule?e:{default:e}}var d=l.contextPath();function f(e,t,o){return s.ajax({type:{enable:"PUT",disable:"DELETE"}[e],contentType:"application/json",url:d+"/rest/feature/1/"+t+"/"+o,data:{}})}t.default=c.extend(r,{remotely:{user:{enable:function(e){return r.enable(e),f("enable","user",e)},disable:function(e){return r.disable(e),f("disable","user",e)}}}}),e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-definitions",["module","exports","ajs","../../utils/dark-features","configuration"],function(e,t,o,n,i){"use strict";var a=s(o).default,r=s(n).default;function s(e){return e&&e.__esModule?e:{default:e}}var l=i.DARK_FEATURES.RECOMMENDED_FOR_YOU_DARK_FEATURE,c=[{key:"recently-worked",url:"recently-worked",label:a.I18n.getText("recently.worked.title"),icon:"confluence-icon-recently-worked-on",controllerModule:"confluence-dashboard/modules/recently-worked/recently-worked-controller",controllerMethod:"recentWorked",spa:!0},{key:"recently-viewed",url:"recently-viewed",label:a.I18n.getText("recently.viewed.title"),icon:"confluence-icon-recently-viewed",controllerModule:"confluence-dashboard/modules/recently-viewed/recently-viewed-controller",controllerMethod:"recentViewed",spa:!0},{key:"starred",url:"starred",label:a.I18n.getText("starred.title"),icon:"confluence-icon-starred",controllerModule:"confluence-dashboard/modules/starred/starred-controller",controllerMethod:"starred",spa:!0}],u=[{key:"all-updates",url:"all-updates",icon:"confluence-icon-all-updates",label:a.I18n.getText("all.updates.title"),controllerModule:"confluence-dashboard/modules/all-updates/all-updates-controller",controllerMethod:"allUpdates",spa:!0},{key:"popular-stream",url:"popular",icon:"confluence-icon-popular",label:a.I18n.getText("popular.stream.title"),controllerModule:"confluence-dashboard/modules/popular-stream/popular-stream-controller",controllerMethod:"popularStream",spa:!0}];r.isEnabled(l)&&u.push({key:"recommended-stream",url:"recommended",icon:"confluence-icon-recommended",label:"Recommended for you",controllerModule:"confluence-dashboard/modules/recommended-stream/recommended-stream-controller",controllerMethod:"recommendedStream",spa:!0}),t.default={MY_WORK:c,DISCOVER:u},e.exports=t.default}),define("confluence-dashboard/soy-templates",["module","exports"],function(e,t){"use strict";t.default=window.DashboardTemplates,e.exports=t.default}),define("confluence-dashboard/behaviors/tooltips",["module","exports","marionette"],function(e,t,o){"use strict";var n=o.Behavior;t.default=n.extend({defaults:{selector:".tooltip",configs:{gravity:"s"}},onRender:function(){this.$(this.options.selector).tooltip(this.options.configs)},onBeforeDestroy:function(){this.$(this.options.selector).tooltip("hide")}}),e.exports=t.default}),define("confluence-dashboard/behaviors/tooltips.js",function(){}),define("confluence-dashboard/modules/nav/nav-item-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/event-manager","backbone","../../behaviors/tooltips"],function(e,t,o,n,i,a,r){"use strict";var s=o.ItemView,l=f(n).default,c=i.EventManager,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({tagName:"li",template:l.Nav.item,behaviors:{tooltip:{behaviorClass:d,selector:".aui-nav-item",configs:{gravity:"w"}}},modelEvents:{"change selected":"render"},events:{"click a":"onClick"},onClick:function(){this.model.set("selected",!0)},initialize:function(){this.onChangeRoute(),this.listenTo(c,"onRoute",this.onChangeRoute)},onChangeRoute:function(){this.model.set("selected",this.model.get("url")===u.history.fragment)},onBeforeRender:function(){this.$el.attr({class:"nav-item-container-"+this.model.get("key")+" "+(this.model.get("selected")?"aui-nav-selected":"")})}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection",["module","exports","backbone"],function(e,t,o){"use strict";var n=o.Collection;t.default=n.extend({groupMethod:function(e){throw"groupMethod method missing - check this collection !!!"},safeFetch:function(e){return this.filterXHR&&/[1-3]/.test(this.filterXHR.readyState)&&(this.filterXHR.abort(),this.filterXHR=null),this.filterXHR=this.fetch(e),this.filterXHR},sync:function(e,t,o){return o.cache||(o.cache=!1),n.prototype.sync.apply(this,arguments)}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection.js",function(){}),define("confluence-dashboard/core/web-fragments/web-item/web-item-collection",["module","exports","../../shared/base-collection","backbone","configuration"],function(e,t,o,n,i){"use strict";var a,r=(a=o,a&&a.__esModule?a:{default:a}).default,s=n.Model,l=i.endpoints;var c=s.extend({defaults:{weight:1,urlWithoutContextPath:!0}});t.default=r.extend({model:c,setContainer:function(e){this.container=e},url:function(){return l.WEB_ITEMS(this.container)},extractUrls:function(){return this.invoke("pick",["url","key"])}}),e.exports=t.default}),define("confluence-dashboard/core/web-fragments/web-item/web-item-views",["module","exports","marionette","confluence-dashboard/soy-templates","./web-item-collection"],function(e,t,o,n,i){"use strict";var a=o.CollectionView,r=o.CompositeView,s=o.ItemView,l=u(n).default,c=u(i).default;function u(e){return e&&e.__esModule?e:{default:e}}var d=s.extend({tagName:"li",template:l.WebFragments.webItem}),f=a.extend({tagName:"ul",childView:d,initialize:function(e){if(!e.container)throw"A container should be defined for a web item";this.collection=new c}}),h=r.extend({childView:d,initialize:function(e){if(!e.container)throw"A container should be defined for a web item";this.collection=new c}});t.default={WebItemView:d,WebItemCollectionView:f,WebItemCompositeView:h},e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-composite-view",["module","exports","confluence-dashboard/soy-templates","./nav-item-view","../../core/web-fragments/web-item/web-item-views"],function(e,t,o,n,i){"use strict";var a=l(o).default,r=l(n).default,s=i.WebItemCompositeView;function l(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({template:a.Nav.container,childViewContainer:".nav-items",className:"backbone-view",childView:r}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-controller",["module","exports","marionette","underscore"],function(e,t,o,n){"use strict";var i,a=o.Object,r=(i=n,i&&i.__esModule?i:{default:i}).default;t.default=a.extend({initialize:function(){this.wrapActions()},actionsToFilter:[],beforeAction:function(){},afterAction:function(){},wrapActions:function(){var e=this;this.actionsToFilter.forEach(function(t){if(!e[t]||!r.isFunction(e[t]))throw"Method '"+t+"' not found!";var o=e[t];e[t]=function(){!1!==this.beforeAction.apply(this,arguments)&&(o.apply(this,arguments),this.afterAction.apply(this,arguments))}})}}),e.exports=t.default}),define("confluence-dashboard/modules/nav/nav-controller",["module","exports","configuration","./nav-definitions","../../utils/event-manager","./nav-composite-view","../../core/shared/base-controller","ajs","jquery"],function(e,t,o,n,i,a,r,s,l){"use strict";var c=o.sections,u=n.DISCOVER,d=n.MY_WORK,f=i.Commands,h=g(a).default,p=g(r).default,m=g(s).default,v=g(l).default;function g(e){return e&&e.__esModule?e:{default:e}}t.default=p.extend({createDiscoverView:function(){var e=this.createDefaultNavContainer({container:c.webItems.sidebar.DISCOVER,templateHelpers:{title:m.I18n.getText("nav.controller.discover")}});e.collection.add(u);return e.on("dom:refresh",function(){v("body").animate({scrollTop:0})}),e},createMyWorkView:function(){var e=this.createDefaultNavContainer({container:c.webItems.sidebar.MY_WORK,templateHelpers:{title:m.I18n.getText("nav.controller.my.work")}});return e.collection.add(d),e},createDefaultNavContainer:function(e){var t=new h(e);return this.listenTo(t.collection,"add",this.bootstrapWebItem,this),t.collection.setContainer(e.container),t},bootstrapWebItem:function(e){f.execute("app:setupWebItem",e.toJSON())}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-collection",["module","exports","../../core/shared/base-collection","backbone","configuration","ajs"],function(e,t,o,n,i,a){"use strict";var r=c(o).default,s=n.Model,l=(n.Collection,i.endpoints);function c(e){return e&&e.__esModule?e:{default:e}}var u=c(a).default.contextPath(),d=s.extend({idAttribute:"key",url:function(){return l.TOGGLE_FAVOURITE_SPACE(this.get("key"))},parse:function(e){return e.url=u+e.url,e.logo=u+e.space.icon.path,e.name=e.title,e.key=e.space.key,e}}),f=r.extend({url:l.FAVOURITE_SPACES,model:d,parse:function(e){return e.results}}),h=f.extend({url:l.ALL_SPACES});t.default={FavouriteSpacesCollection:f,AllSpacesCollection:h},e.exports=t.default}),define("confluence-dashboard/core/shared/base-composite-view",["module","exports","marionette","configuration"],function(e,t,o,n){"use strict";var i=o.CompositeView;n.staticResourceUrl;t.default=i.extend({fetched:!1,collectionEvents:{sync:"onCollectionSync"},getOption:function(e){return"emptyViewOptions"===e?this.selectEmptyViewOptions():i.prototype.getOption.call(this,e)},isFiltered:function(){return!1},onCollectionSync:function(){var e=!this.fetched;this.fetched=!0,(e||0===this.collection.length)&&this._renderChildren()},getEmptyView:function(){var e=this.selectEmptyViewType(),t=this.getOption(e);if(!t)throw"Missing "+e;return t},selectEmptyViewType:function(){return this.fetched?this.isFiltered()?"noMatchesView":"emptyView":"loadingView"},selectEmptyViewOptions:function(){var e=this.selectEmptyViewType();return i.prototype.getOption.call(this,e+"Options")}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-composite-view.js",function(){}),define("confluence-dashboard/core/shared/loading-view",["module","exports","marionette","confluence-dashboard/soy-templates"],function(e,t,o,n){"use strict";var i,a=o.ItemView,r=(i=n,i&&i.__esModule?i:{default:i}).default;t.default=a.extend({tagName:"li",className:"empty-view loading-view",getTemplate:function(){return r.Default.loading}}),e.exports=t.default}),define("confluence-dashboard/core/shared/loading-view.js",function(){}),define("confluence-dashboard/utils/analytics",["module","exports","ajs","backbone"],function(e,t,o,n){"use strict";var i=r(o).default,a=r(n).default;function r(e){return e&&e.__esModule?e:{default:e}}t.default={publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="confluence.spa."+e;t.currentSection=a.history.fragment,i.trigger("analytics",{name:o,data:t})}},e.exports=t.default}),define("confluence-dashboard/behaviors/undo-remove",["module","exports","marionette","jquery","../utils/analytics"],function(e,t,o,n,i){"use strict";var a=o.Behavior,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}var c=r(window);t.default=a.extend({defaults:{timeToDestroy:3e3},ui:{remove:".remove",undo:".undo-remove"},events:{"click @ui.remove":"virtualRemove","click @ui.undo":"undoVirtualRemove"},modelEvents:{"change:virtuallyDeleted":"onVirtualDelete"},onVirtualDelete:function(){this.view.render()},virtualRemove:function(){var e=this;this.view.model.set("virtuallyDeleted",!0),this.timeout=setTimeout(function(){e.sendRemove()},this.options.timeToDestroy),this.bindToUnload(),s.publish(this.options.eventNamespace+".remove-favourite.clicked")},undoVirtualRemove:function(){clearTimeout(this.timeout),this.unbindFromUnload(),this.view.model.set("virtuallyDeleted",!1),s.publish(this.options.eventNamespace+".remove-favourite.undo")},bindToUnload:function(){var e=this,t=this.view.model.get("id");c.on("beforeunload.remove."+t,function(){e.sendRemove()})},unbindFromUnload:function(){var e=this.view.model.get("id");c.off("beforeunload.remove."+e)},sendRemove:function(){this.view.model.destroy(),this.unbindFromUnload()}}),e.exports=t.default}),define("confluence-dashboard/utils/conditions",["module","exports","confluence/meta","ajs"],function(e,t,o,n){"use strict";var i=r(o).default,a=r(n).default;function r(e){return e&&e.__esModule?e:{default:e}}t.default={canShowDashboard:function(){var e=document.querySelector(".confluence-dashboard");return e||a.log("Simplify dashboard disabled.",{simplifyDashboardPresent:e}),e},isAnonymousUser:function(){return!i.get("remote-user")}},e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-item-view",["module","exports","marionette","../../behaviors/undo-remove","../../behaviors/tooltips","confluence-dashboard/soy-templates","../../utils/conditions"],function(e,t,o,n,i,a,r){"use strict";var s=o.ItemView,l=f(n).default,c=f(i).default,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({template:u.NavSpaces.space,tagName:"li",className:"item",templateHelpers:function(){return{isAnonymousUser:d.isAnonymousUser()}},behaviors:{undoRemove:{behaviorClass:l,eventNamespace:"global-sidebar.spaces-menu"},tooltip:{behaviorClass:c,selector:".aui-nav-item",configs:{gravity:"w"}}}}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-content-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/analytics","confluence/legacy","confluence/meta"],function(e,t,o,n,i,a,r){"use strict";var s=o.ItemView,l=f(n).default,c=f(i).default,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({tagName:"li",className:"empty-view no-content-view",template:l.Default.blank,templateHelpers:function(){return{userCanCreateContent:d.getBoolean("user-can-create-content")}},events:{"click a":"onActionClick","click .create-page":"openCreatePage"},openCreatePage:function(){u.Blueprint.loadDialogAndOpenTemplate({})},onActionClick:function(){c.publish("blank-experience.action.clicked")}}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-content-view.js",function(){}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-empty-view",["module","exports","confluence-dashboard/soy-templates","../../core/shared/no-content-view","ajs"],function(e,t,o,n,i){"use strict";var a=l(o).default,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}t.default=r.extend({tagName:"li",template:a.NavSpaces.mySpacesBlank,className:"nav-space-blank",templateHelpers:{text:s.I18n.getText("nav.controller.my.spaces.blank"),callToActionText:s.I18n.getText("nav.controller.my.spaces.blank.callToAction"),callToActionLink:s.contextPath()+"/spacedirectory/view.action"}}),e.exports=t.default}),define("confluence-dashboard/behaviors/analytics-tracking",["module","exports","marionette","../utils/analytics","backbone","underscore"],function(e,t,o,n,i,a){"use strict";var r=o.Behavior,s=l(n).default;l(i).default,l(a).default;function l(e){return e&&e.__esModule?e:{default:e}}t.default=r.extend({defaults:{prefix:""},events:{"click a":"trackItemClick"},trackItemClick:function(){var e="item.clicked";this.options.prefix&&(e=this.options.prefix+"."+e),s.publish(e)}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-composite-view",["module","exports","../../core/shared/base-composite-view","../../core/shared/loading-view","confluence-dashboard/soy-templates","./nav-spaces-item-view","./nav-spaces-empty-view","../../behaviors/analytics-tracking","../../utils/analytics"],function(e,t,o,n,i,a,r,s,l){"use strict";var c=v(o).default,u=v(n).default,d=v(i).default,f=v(a).default,h=v(r).default,p=v(s).default,m=v(l).default;function v(e){return e&&e.__esModule?e:{default:e}}t.default=c.extend({template:d.Nav.container,childViewContainer:".nav-items",childView:f,emptyView:h,loadingView:u,className:"aui-navgroup-inner",behaviors:{analyticsTracking:{behaviorClass:p,prefix:"global-sidebar.spaces-menu"}},events:{"click .all-spaces-link":"onSpaceDirectoryClick"},onSpaceDirectoryClick:function(){m.publish("space-directory.clicked")}}),e.exports=t.default}),define("confluence-dashboard/modules/nav-spaces/nav-spaces-controller",["module","exports","configuration","./nav-spaces-collection","./nav-spaces-composite-view","../../core/shared/base-controller","ajs"],function(e,t,o,n,i,a,r){"use strict";var s=o.sections,l=n.AllSpacesCollection,c=n.FavouriteSpacesCollection,u=h(i).default,d=h(a).default,f=h(r).default;function h(e){return e&&e.__esModule?e:{default:e}}t.default=d.extend({createAllSpacesView:function(){return new u({container:s.webItems.sidebar.MY_SPACES,collection:new l,templateHelpers:{title:f.I18n.getText("nav.controller.all.spaces"),anchorName:f.I18n.getText("nav.controller.my.spaces.anchor"),anchorLink:f.contextPath()+"/spacedirectory/view.action",anchorTitle:f.I18n.getText("sidebar.header.spaces.menu.view.all")}})},createMySpacesView:function(){var e=new u({container:s.webItems.sidebar.MY_SPACES,collection:new c,templateHelpers:{title:f.I18n.getText("nav.controller.my.spaces"),anchorName:f.I18n.getText("nav.controller.my.spaces.anchor"),anchorLink:f.contextPath()+"/spacedirectory/view.action",anchorTitle:f.I18n.getText("sidebar.header.spaces.menu.view.all")}});return e.collection.fetch(),e}}),e.exports=t.default}),define("confluence-dashboard/modules/sidebar/sidebar-view",["module","exports","marionette","ajs","../../behaviors/aui-sidebar-resizable","../../modules/nav/nav-controller","../../modules/nav-spaces/nav-spaces-controller","../../utils/conditions"],function(e,t,o,n,i,a,r,s){"use strict";var l=o.LayoutView,c=p(n).default,u=p(i).default,d=p(a).default,f=p(r).default,h=p(s).default;function p(e){return e&&e.__esModule?e:{default:e}}t.default=l.extend({template:!1,el:".aui-sidebar",regions:{"sidebar-discover":"#sidebar-discover","sidebar-my-work":"#sidebar-my-work","sidebar-spaces":"#sidebar-spaces"},behaviors:{AuiSidebarResizable:{behaviorClass:u}},initialize:function(){this.setNavContent(),this.trigger("sidebar-attached")},setNavContent:function(){var e=this,t=new d,o=new f;if(this.getRegion("sidebar-discover").show(t.createDiscoverView()),h.isAnonymousUser()){var n=o.createAllSpacesView();n.collection.fetch().then(function(){n.collection.length>0&&e.getRegion("sidebar-spaces").show(n)})}else this.getRegion("sidebar-my-work").show(t.createMyWorkView()),this.getRegion("sidebar-spaces").show(o.createMySpacesView())},expand:function(){c.sidebar(this.el).expand()},collapse:function(){c.sidebar(this.el).collapse()}}),e.exports=t.default}),define("confluence-dashboard/modules/welcome-message/welcome-message-view",["module","exports","marionette","jquery","../../utils/analytics"],function(e,t,o,n,i){"use strict";var a=o.ItemView,r=(s(n).default,s(i).default);function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.extend({el:".welcome-message",template:!1,events:{"mouseenter a.welcome-message-edit-button":"highlightOn","mouseleave a.welcome-message-edit-button":"highlightOff","click a.welcome-message-edit-button":"onEditButtonClick"},highlightOn:function(){this.$el.addClass("welcome-message-highlight")},highlightOff:function(){this.$el.removeClass("welcome-message-highlight")},onEditButtonClick:function(){r.publish("edit-welcome-message.clicked")}}),e.exports=t.default}),define("confluence-dashboard/core/main/main-router",["module","exports","marionette","../../utils/event-manager","backbone","confluence/storage-manager","underscore","jquery","../../utils/analytics"],function(e,t,o,n,i,a,r,s,l){"use strict";var c=o.AppRouter,u=n.EventManager,d=v(i).default,f=v(a).default,h=v(r).default,p=v(s).default,m=v(l).default;function v(e){return e&&e.__esModule?e:{default:e}}var g=f("dashboard","route"),b=h.debounce(function(e){m.publish("view",{previousSection:e})},100);t.default=c.extend({initialize:function(){this.listenTo(d.history,"route",this.onRoute)},onRoute:function(){b(g.getItem("last"));var e=d.history.fragment;g.setItemQuietly("last",e),u.trigger("onRoute",e)},appRoutes:{"":"index"},controller:{index:function(){var e="all-updates";g.doesContain("last")&&(e=g.getItem("last")),m.publish("root-loaded",{redirectedTo:e}),d.history.navigate(e,{trigger:!0,replace:!0})}},handleClicks:function(e){var t=p(e.currentTarget).attr("href"),o=window.location.protocol+"//";if(t.slice(o.length)!==o){var n="global-sidebar.clicked.using-meta";e.ctrlKey||e.metaKey||(e.preventDefault(),d.history.fragment===t.slice(1)?d.history.loadUrl():this.navigate(t,!0),n="global-sidebar.clicked"),m.publish(n)}}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-factory",["module","exports"],function(e,t){"use strict";t.default=function(e){if(!e)throw"Missing options!";var t=e.name,o=e.scope,n=e.routes,i=e.controllerModule;if(!i)throw"Missing controller module!";if(!n)throw"Missing route definitions!";var a=require(i);if(!a)throw"Controller not found!";return new a({name:t,scope:o||"/",routes:n})},e.exports=t.default}),define("confluence-dashboard/core/main/main-controller",["module","exports","./main-router","../../utils/event-manager","backbone","../shared/base-controller","../content/content-factory"],function(e,t,o,n,i,a,r){"use strict";var s=f(o).default,l=n.Commands,c=f(i).default,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=u.extend({initialize:function(){this.router=new s,this.on("navigate",this.onNavigate,this),l.setHandler("app:setupWebItem",this.setupWebItem,this)},onNavigate:function(e){this.router.navigate(e,!0)},setupWebItem:function(e){if(!e)throw"No web item data";if(e.spa){if(!e.url)throw"Web Item missing an url";if(!e.controllerMethod)throw"Web Item missing its controller method";if(!e.controllerModule)throw"Web Item missing controller";var t=(o={},n=e.url,i=e.controllerMethod,n in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i,o);this.webItemController=d({name:e.key,scope:e.scope,routes:t,controllerModule:e.controllerModule}),e.url===c.history.fragment&&c.history.loadUrl()}var o,n,i}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-region-animation",["module","exports","marionette","jquery"],function(e,t,o,n){"use strict";var i,a=o.Region,r=(i=n,i&&i.__esModule?i:{default:i}).default;r.extend(r.easing,{def:"easeOutQuad",easeOutQuad:function(e,t,o,n,i){return-n*(t/=i)*(t-2)+o}});var s={easing:"easeOutQuad",duration:200,queue:!1};t.default=a.extend({in:function(e){e.css({position:"relative",top:"15px",opacity:0}).animate({top:0,opacity:1},s)},out:function(e){var t=r.Deferred();return e.animate({opacity:0},r.extend({},s,{complete:function(){t.resolve()}})),t.promise()},show:function(){var e=this,t=this,o=arguments;this.currentView?function(){var e=r.Deferred(),t=r("#header").height(),o=document.documentElement;if((window.pageYOffset||o.scrollTop)-(o.clientTop||0)>t){var n=r.extend({},s,{complete:function(){e.resolve()}});r("html, body").animate({scrollTop:t},n)}else e.resolve();return e.promise()}().then(function(){e.out(e.$el.find(e.options.selectorToAnimate)).then(function(){a.prototype.show.apply(t,o),e.in(e.$el.find(e.options.selectorToAnimate))})}):(a.prototype.show.apply(this,arguments),this.in(this.$el.find(this.options.selectorToAnimate)))}}),e.exports=t.default}),define("confluence-dashboard/core/main/main-app",["module","exports","marionette","../../utils/event-manager","../../modules/sidebar/sidebar-view","../../modules/welcome-message/welcome-message-view","./main-controller","../content/content-region-animation","underscore","jquery"],function(e,t,o,n,i,a,r,s,l,c){"use strict";var u=o.Application,d=n.ReqRes,f=n.EventManager,h=n.Commands,p=w(i).default,m=w(a).default,v=w(r).default,g=w(s).default,b=w(l).default;function w(e){return e&&e.__esModule?e:{default:e}}var y=(0,w(c).default)(window);t.default=u.extend({el:".PageContent",isStarted:!1,regions:{page:".confluence-dashboard",content:{el:".content-body",selectorToAnimate:".list-container",regionClass:g},dialogs:".dialogs","right-sidebar":".content-sidebar","welcome-message":".welcome-message-wrapper"},initialize:function(){this.controller=new v,this.router=this.controller.router,d.setHandler("app",this.getApp,this),h.setHandler("main-app:swapContent",this.swapContent,this),h.setHandler("main-app:showDialog",this.showDialog,this),y.on("scroll.window.main-layout",this.triggerWindowScroll),y.on("resize.window.main-layout",b.debounce(this.triggerWindowResize.bind(this),16))},getApp:function(){return this},onStart:function(){this.isStarted=!0,this.attachServerRenderedViews(),this.attachWelcomeMessage()},onBeforeDestroy:function(){y.off("scroll.window.main-layout"),y.off("resize.window.main-layout")},triggerWindowScroll:function(){f.trigger("window:scroll",window)},triggerWindowResize:function(){f.trigger("window:resize",window)},expandSidebar:function(){this.sidebarView&&this.sidebarView.expand()},swapContent:function(e){this.getRegion("content").show(e)},showDialog:function(e){this.getRegion("dialogs").show(e)},attachServerRenderedViews:function(){this.sidebarView=new p,this.getRegion("page").attachView(this.sidebarView)},attachWelcomeMessage:function(){this.getRegion("welcome-message").attachView(new m)}}),e.exports=t.default}),define("confluence-dashboard/utils/single-flag",["module","exports","confluence/flag","underscore","jquery"],function(e,t,o,n,i){"use strict";var a=l(o).default,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}var c={currentFlag:null,closePreviousFlags:function(){c.currentFlag&&(c.currentFlag.flag.close(),c.currentFlag=null)},shouldShow:function(e){if(!c.currentFlag||!c.currentFlag.flag)return!0;var t="false"===s(c.currentFlag.flag).attr("aria-hidden"),o=r.isEqual(c.currentFlag.options,e);return!t||!o},create:function(e){var t=r.extend({type:"error",close:"auto",persistent:!1,stack:"dashboard"},e);if(this.shouldShow(t)){c.closePreviousFlags();var o=a(t);c.currentFlag={flag:o,options:t},t.callback&&r.isFunction(t.callback)&&t.callback()}}};t.default=c,e.exports=t.default}),define("confluence-dashboard/utils/navigation",["module","exports","window"],function(e,t,o){"use strict";var n,i=(n=o,n&&n.__esModule?n:{default:n}).default;t.default={redirect:function(e){i.location.href=e}},e.exports=t.default}),define("confluence-dashboard/utils/error-handlers",["module","exports","backbone","jquery","ajs","./analytics","./single-flag","./navigation","configuration"],function(e,t,o,n,i,a,r,s,l){"use strict";var c=v(o).default,u=v(n).default,d=v(i).default,f=v(a).default,h=v(r).default,p=v(s).default,m=l.URLS;function v(e){return e&&e.__esModule?e:{default:e}}var g=u(window),b=d.contextPath(),w={NOT_FOUND:{type:"error",title:d.I18n.getText("error.notfound.title"),close:"auto"},SERVER_ERROR:{type:"error",title:d.I18n.getText("error.server-error.title"),body:d.I18n.getText("error.server-error.body"),close:"auto"},SESSION_EXPIRED:{type:"error",title:d.I18n.getText("error.session.expired.title"),body:d.I18n.getText("error.session.expired.body"),close:"never"},OFFLINE:{type:"error",title:d.I18n.getText("error.connection.lost.title"),body:d.I18n.getText("error.connection.lost.body"),close:"never"},ONLINE:{type:"success",title:d.I18n.getText("error.connection.recovered.title"),body:'<button class="aui-button aui-button-link btn-reload-content">'+d.I18n.getText("error.connection.recovered.action")+"</button>",close:"auto",callback:function(){u(h.currentFlag).on("click",".btn-reload-content",function(){h.closePreviousFlags(),c.history.loadUrl()})}}},y=function(){h.create(w.NOT_FOUND),f.publish("error-handler.not-found")},x=function(){h.create(w.SERVER_ERROR),f.publish("error-handler.server-error")},_=function(e){if(0===e.status)x();else if(/(401|403)/.test(e.status)){h.create(w.SESSION_EXPIRED),f.publish("error-handler.session.expired");var t=window.location.pathname.replace(b,"");p.redirect(m.LOGIN_PAGE+"?os_destination="+t)}},S=function(){h.create(w.OFFLINE),f.publish("error-handler.connection.lost"),g.one("online.dashboard-error-handler",function(){h.create(w.ONLINE),f.publish("error-handler.connection.recovered")})},k=c.ajax;t.default={interceptBackboneErrors:function(){c.ajax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.statusCode=u.extend({401:_,403:_,404:y,400:x,500:x},e.statusCode||{}),c.$.ajax.call(c.$,e)}},interceptConnectionErrors:function(){g.on("offline.dashboard-error-handler",S)},stopIntercepting:function(){g.off(".dashboard-error-handler"),c.ajax=k}},e.exports=t.default}),define("confluence-dashboard/app",["module","exports","backbone","jquery","./core/main/main-app","./utils/error-handlers","./utils/analytics","configuration"],function(e,t,o,n,i,a,r,s){"use strict";var l=p(o).default,c=p(n).default,u=p(i).default,d=p(a).default,f=p(r).default,h=s.backboneHistoryConfig;function p(e){return e&&e.__esModule?e:{default:e}}var m=new u;m.on("before:start",function(){d.interceptBackboneErrors(),d.interceptConnectionErrors(),l.history.start(h)}),m.on("start",function(){c(document).on("click",".confluence-dashboard .aui-sidebar-body .spa a",m.router.handleClicks.bind(m.router)),f.publish("rendered")}),t.default=m,e.exports=t.default}),define("confluence-dashboard/index",["./app","./utils/conditions","ajs"],function(e,t,o){"use strict";var n=a(e).default,i=a(t).default;function a(e){return e&&e.__esModule?e:{default:e}}a(o).default.toInit(function(){i.canShowDashboard()&&n.start()})}),define("confluence-dashboard/core/shared/no-matches-view",["module","exports","marionette","confluence-dashboard/soy-templates"],function(e,t,o,n){"use strict";var i,a=o.ItemView,r=(i=n,i&&i.__esModule?i:{default:i}).default;t.default=a.extend({tagName:"li",className:"empty-view no-matches-view",template:r.Default.noMatches}),e.exports=t.default}),define("confluence-dashboard/core/shared/no-matches-view.js",function(){}),define("confluence-dashboard/core/shared/cql-base-collection",["module","exports","./base-collection","jquery","ajs","underscore"],function(e,t,o,n,i,a){"use strict";var r=u(o).default,s=u(n).default,l=u(i).default,c=u(a).default;function u(e){return e&&e.__esModule?e:{default:e}}var d=l.contextPath();t.default=r.extend({url:function(){return this.buildUrlFromParams()},buildUrlFromParams:function(e){if(!this.apiParams)throw"apiParams attribute missing";var t=this.getApiParams(e),o=t.url,n=t.params,i=t.expansions,a=t.cqlcontext,r=t.cql,l=t.cqlOrder,c=[];if(!o)throw"CqlBaseCollection:buildUrlFromParams: missing URL!";return n&&c.push(s.param(n)),i&&c.push("expand="+i.join(",")),a&&c.push("cqlcontext="+encodeURI(a)),r&&(e&&e.cqlQuery&&(r+=" "+e.cqlQuery),l&&(r+=" order by "+l),c.push("cql="+r)),c.length&&(o=o+"?"+c.join("&")),o},getApiParams:function(e){return c.isFunction(this.apiParams)?this.apiParams(e):this.apiParams},parse:function(e,t){return this.parseNext(e,t),e.results},parseNext:function(e,t){e._links&&e._links.next?(this.hasNext=!0,this.nextUrl=d+e._links.next):(this.hasNext=!1,this.nextUrl=null)},loadMore:function(){if(this.hasNext)return this.safeFetch({url:this.nextUrl,remove:!1,loadingMore:!0});var e=s.Deferred();return e.reject(),e.promise()},search:function(e){var t=this.buildUrlFromParams({cqlQuery:"and title ~ '"+e.query+"*'",isFiltered:!0});return this.safeFetch({url:t,isFiltered:!0})}}),e.exports=t.default}),define("confluence-dashboard/core/shared/cql-base-collection.js",function(){}),define("confluence-dashboard/core/shared/base-collection-with-function",["module","exports","./cql-base-collection","configuration","underscore"],function(e,t,o,n,i){"use strict";var a=c(o).default,r=n.apiLimit,s=n.visibleItemLimit,l=c(i).default;function c(e){return e&&e.__esModule?e:{default:e}}t.default=a.extend({pageOffset:0,sync:function(e,t,o){return o.loadingMore||(this.pageOffset=0),a.prototype.sync.apply(this,arguments)},parseNext:function(e,t){this.pageOffset+=e.results.length,this.hasNext=!(t&&t.isFiltered)&&e.results.length>0&&this.getPageLimit(t)>0,this.nextUrl=this.hasNext?this.buildUrlFromParams(t):null},getPageOffset:function(e){return e&&e.isFiltered?0:this.pageOffset},getPageLimit:function(e){return e&&e.isFiltered?s:l.min([r,s-this.getPageOffset(e)])}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-collection-with-function.js",function(){}),define("confluence-dashboard/core/shared/base-dialog",["module","exports","marionette","ajs"],function(e,t,o,n){"use strict";var i,a=o.ItemView,r=(i=n,i&&i.__esModule?i:{default:i}).default;t.default=a.extend({tagName:"section",className:"aui-layer aui-dialog2 aui-dialog2-medium confluence-dialog-no-chrome confluence-dialog-centered",attributes:{"aria-hidden":!0},openDialog:function(){var e=this;this.initDialog(),this.dialog.on("show",function(){return e.delegateEvents()}),this.dialog.on("hide",function(){return e.destroy()}),this.dialog.show()},closeDialog:function(){this.dialog&&this.dialog.hide()},onRender:function(){this.initDialog()},initDialog:function(){this.dialog||(this.dialog=r.dialog2(this.el))}}),e.exports=t.default}),define("confluence-dashboard/core/shared/base-dialog.js",function(){}),define("confluence-dashboard/core/shared/scope-router",["module","exports","marionette","backbone","underscore"],function(e,t,o,n,i){"use strict";var a=o.AppRouter,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}r.History.prototype.route=function(e,t){var o=String(e),n=s.findWhere(this.handlers,{name:o});n?n.callback=t:this.handlers.unshift({name:o,route:e,callback:t})},t.default=a.extend({initialize:function(e){var t=this.options.scope||this.scope,o=this.options.scopedRoutes||this.scopedRoutes;if(!t)throw"Scope router requires a scope!";if(!o)throw"Scope router requires a scopedRoutes object!";if(!this.controller&&!this.options.controller)throw"Scope router requires a controller!";"/"===t?t="":t+="/";var n={};s.each(o,function(e,o){n[""+t+o]=e}),this.scope=t,this.appRoutes=n}}),e.exports=t.default}),define("confluence-dashboard/core/shared/scope-router.js",function(){}),define("confluence-dashboard/core/content/content-as-grouped-list-view",["module","exports","../shared/base-composite-view","confluence-dashboard/soy-templates","../../utils/event-manager","../../behaviors/stickable/stickable","../../behaviors/infinite-loading","../../behaviors/filterable","../../behaviors/progress-indicator","../../behaviors/analytics-tracking","../shared/no-content-view","../shared/loading-view","../shared/no-matches-view","../../modules/group/group-composite-view","../../modules/group/group-collection","../../modules/list-item/list-item-view"],function(e,t,o,n,i,a,r,s,l,c,u,d,f,h,p,m){"use strict";var v=D(o).default,g=D(n).default,b=(i.EventManager,D(a).default),w=D(r).default,y=D(s).default,x=D(l).default,_=D(c).default,S=D(u).default,k=D(d).default,E=D(f).default,T=D(h).default,M=D(p).default,C=D(m).default;function D(e){return e&&e.__esModule?e:{default:e}}t.default=v.extend({template:g.Content.groupedListWithFilter,childViewContainer:".list-container",childView:T,childViewOptions:{childView:C},emptyView:S,loadingView:k,noMatchesView:E,noMatchesViewOptions:{templateHelpers:function(){return{filter:this._parent.getFilterString()}}},ui:{filter:"[name=filter]"},behaviors:{stickMainHeader:{behaviorClass:b,element:".content-header",autoRun:!0},infiniteLoading:{behaviorClass:w,target:".list-container"},progressIndicator:{behaviorClass:x,dataSource:"collection",container:".spinner-container:first",size:"medium"},filterable:{behaviorClass:y},analyticsTracking:{behaviorClass:_}},events:{"submit .content-filter":"onFilterSubmit"},initialize:function(){var e=this.collection;this.collection=new M([],{collectionToGroup:e})},isFiltered:function(){return this.getFilterString().length>0},getFilterString:function(){return this.ui.filter.val()},onFilterSubmit:function(e){e.preventDefault()}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-grouped-list-view.js",function(){}),define("confluence-dashboard/behaviors/stickable/stickable",["module","exports","marionette","../../utils/event-manager","underscore"],function(e,t,o,n,i){"use strict";var a,r=o.Behavior,s=n.EventManager,l=(a=i,a&&a.__esModule?a:{default:a}).default;t.default=r.extend({defaults:{offset:0,gap:0,autoRun:!1},onRender:function(){var e=this.options;if(!e.element)throw"Behavior:Stickable: Missing `element` attribute";this.$target=this.view.$el.find(e.element),this.target=this.$target[0],this.listenTo(s,"window:resize",this.onResize,this),this.listenTo(s,"window:scroll",this.stick,this),this.listenTo(s,"list:change",this.stick,this),e.autoRun&&l.defer(this.stick.bind(this)),this.view.$el.addClass("stickable")},stick:function(){var e=this.options,t=e.gap,o=e.offset,n=document.documentElement,i=(window.pageYOffset||n.scrollTop)-(n.clientTop||0),a=this.view.$el.offset().top,r=a+this.view.$el.outerHeight(),s=i+o+t;if(s>=a&&s<=r){var l=this.target.clientWidth;this.clone||(this.clone=this.$target.clone(),this.$target.before(this.clone),this.$target.addClass("stick").css({width:l+"px"})),s>=r-this.$target.outerHeight()?this.$target.removeClass("stick").addClass("stuck"):this.$target.removeClass("stuck").addClass("stick").css({top:o+"px",width:l+"px"})}else this.removeClone()},onResize:function(){if(this.clone){var e=this.clone.width();this.$target.css({width:e+"px"})}},removeClone:function(e){this.clone&&(this.$target.removeClass("stick").removeClass("stuck"),this.$target.css({width:"100%"}),this.clone.remove(),this.clone=null)},onBeforeDestroy:function(){this.removeClone()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/stickable/stickable.js",function(){}),define("confluence-dashboard/behaviors/infinite-loading",["module","exports","marionette","../utils/event-manager","jquery","underscore"],function(e,t,o,n,i,a){"use strict";var r=o.Behavior,s=n.EventManager,l=(n.Commands,u(i).default),c=u(a).default;function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.extend({defaults:{offset:50},initialize:function(){this.listenToOnce(this.view,"render:collection",this.setup)},setup:function(){var e=this;this.view.collection.loadMore&&(this.$target=l(this.options.target,this.$el),this.$window=l(window),this.loading=!1,this.listenTo(s,"window:scroll",this.checkPosition,this),this.listenTo(this.view.collection,"sync",this.checkPosition),c.defer(function(){return e.checkPosition()}))},checkPosition:function(){var e=this;if(!this.loading){var t=this.$window.scrollTop()+this.$window.height(),o=this.$target.height();t>this.$target.offset().top+o-this.options.offset&&this.loadMore().then(function(){return e.checkPosition()})}},loadMore:function(){var e=this;return this.loading=!0,this.view.collection.loadMore().always(function(){e.loading=!1})}}),e.exports=t.default}),define("confluence-dashboard/behaviors/infinite-loading.js",function(){}),define("confluence-dashboard/utils/strings",["module","exports","jquery"],function(e,t,o){"use strict";var n,i=(n=o,n&&n.__esModule?n:{default:n}).default;var a=/[\+\-&\|!\(\)\{}\[\]\^~\*\?\\\/:"']/g;t.default={normalizeForCQL:function(e){return i.trim(e.replace(a," "))}},e.exports=t.default}),define("confluence-dashboard/behaviors/filterable",["module","exports","marionette","../utils/event-manager","underscore","jquery","ajs","../utils/analytics","../utils/strings"],function(e,t,o,n,i,a,r,s,l){"use strict";var c=o.Behavior,u=(n.EventManager,p(i).default),d=(p(a).default,p(r).default),f=p(s).default,h=l.normalizeForCQL;function p(e){return e&&e.__esModule?e:{default:e}}t.default=c.extend({ui:{filter:"[name=filter]"},events:{"input @ui.filter":"doFilter"},initialize:function(){this.view.options.collection&&this.view.options.collection.search||console.warn("Behavior:Filterable: The collection is missing or not implementing a search method"),this.doFilter=u.debounce(this.doFilter,400)},onShow:function(){var e=this;this.listenTo(this.view.collection,"sync",this.updateFilterString),this.listenTo(this.view.collection,"error",function(){return e.view.collection.reset([])})},updateFilterString:function(e){this.view.$el.find(".list-container").attr("data-filter-string",this.view.getFilterString()),this.fixAuiSidebar()},fixAuiSidebar:function(){d.sidebar(".aui-sidebar").setPosition()},doFilter:function(){var e=this.ui.filter.val();e=h(e);var t=this.view;if(e.length){if(e===this.lastQuery)return;this.lastQuery=e,t.collection.search({query:e}),f.publish("filter.submit")}else t.collection.safeFetch(),f.publish("filter.clear"),this.lastQuery=null}}),e.exports=t.default}),define("confluence-dashboard/behaviors/filterable.js",function(){}),define("confluence-dashboard/behaviors/progress-indicator",["module","exports","marionette","ajs"],function(e,t,o,n){"use strict";var i,a=o.Behavior,r=(i=n,i&&i.__esModule?i:{default:i}).default;t.default=a.extend({defaults:{size:"small",dataSource:"collection"},dataEvents:{request:"onRequest",sync:"spinStop",error:"spinStop"},initialize:function(){if(!this.options.dataSource)throw"Behavior:ProgressIndicator: A dataSource should be defined. Use 'collection' or 'model'";this[this.options.dataSource+"Events"]=this.dataEvents},onAttach:function(){this.options.autoRun&&this.spin()},onRequest:function(e,t,o){"POST"!==o.type&&"DELETE"!==o.type&&this.spin()},spin:function(){var e=this;this.view._isShown?(this.$el.addClass("loading"),this._currentSpinDelay=setTimeout(function(){r.$(e.options.container,e.view.el).spin({size:e.options.size,zIndex:2e3})},200)):this.listenToOnce(this.view,"show",this.spin,this)},spinStop:function(){this._currentSpinDelay&&(clearTimeout(this._currentSpinDelay),this._currentSpinDelay=null),this.view._isShown||this.stopListening(this.view,"show",this.spin,this),this.options.autoRun=!1,this.$el.removeClass("loading"),r.$(this.options.container,this.view.el).spinStop()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/progress-indicator.js",function(){}),define("confluence-dashboard/modules/group/group-composite-view",["module","exports","marionette","confluence-dashboard/soy-templates","../../utils/event-manager","../../behaviors/stickable/stickable"],function(e,t,o,n,i,a){"use strict";var r=o.CompositeView,s=c(n).default,l=(i.EventManager,c(a).default);function c(e){return e&&e.__esModule?e:{default:e}}t.default=r.extend({template:s.Groups.group,childViewContainer:".group-container",tagName:"li",className:"group-wrapper",behaviors:{stickSubHeaders:{behaviorClass:l,element:".sticky-header",autoRun:!0,offset:75}},initialize:function(){this.collection=this.model.get("items")},onRenderCollection:function(){this.trigger("group:rendered")}}),e.exports=t.default}),define("confluence-dashboard/modules/group/group-composite-view.js",function(){}),define("confluence-dashboard/utils/date-utils",["module","exports","underscore","ajs"],function(e,t,o,n){"use strict";var i=r(o).default,a=r(n).default;function r(e){return e&&e.__esModule?e:{default:e}}function s(){return new Date}function l(e){return new Date(e).toDateString()}var c={today:a.I18n.getText("period.today"),yesterday:a.I18n.getText("period.yesterday"),lastSevenDays:a.I18n.getText("period.lastSevenDays"),lastThirtyDays:a.I18n.getText("period.lastThirtyDays"),older:a.I18n.getText("period.older")},u={today:function(e){return l(e)===s().toDateString()},yesterday:function(e){var t=l(e),o=s();return o.setDate(o.getDate()-1),t===o.toDateString()},lastSevenDays:function(e){var t=s(),o=s().setDate(t.getDate()-7),n=new Date(e);return n>=o&&n<=t},lastThirtyDays:function(e){var t=s(),o=s().setDate(t.getDate()-30),n=new Date(e);return n>=o&&n<=t},getPeriod:function(e){var t=i.pick(u,"today","yesterday","lastSevenDays","lastThirtyDays"),o=i.find(t,function(t,o){return t(e)});return o?i.invert(t)[o]:"older"},getPeriodTitle:function(e){return c[e]},getPeriodOrder:function(e){return i.keys(c).indexOf(e)},compareTimestamps:function(e,t){return Math.max(-1,Math.min(1,e-t))},toISODate:function(e){var t=e.getDate();t=t<=9?"0"+t:t;var o=e.getMonth()+1;o=o<=9?"0"+o:o;var n=(new Date).getTimezoneOffset(),i=Math.abs(Math.floor(n/60));i=i<=9?"0"+i:i;var a=Math.abs(n%60),r=(n<0?"+":"-")+i+":"+(a=a<=9?"0"+a:a);return e.getFullYear()+"-"+o+"-"+t+"T00:00:00"+r}};t.default=u,e.exports=t.default}),define("confluence-dashboard/utils/date-utils.js",function(){}),define("confluence-dashboard/modules/group/group-collection",["module","exports","../../core/shared/base-collection","backbone","underscore","../../utils/date-utils"],function(e,t,o,n,i,a){"use strict";var r=u(o).default,s=(n.Model,n.Collection),l=u(i).default,c=u(a).default;function u(e){return e&&e.__esModule?e:{default:e}}t.default=r.extend({idAttribute:"periodKey",comparator:"periodOrder",methodsToProxy:["url","fetch","safeFetch","loadMore","search"],initialize:function(e,t){if(!t.collectionToGroup)throw"Grouped Collection requires a collection to group";if(!t.collectionToGroup.groupMethod)throw"The target collection should implement a groupMethod";this.collectionToGroup=t.collectionToGroup,this.proxyMethods(),this.proxyEvents()},proxyMethods:function(){var e=this;this.methodsToProxy.forEach(function(t){e[t]=function(){return e.collectionToGroup[t].apply(e.collectionToGroup,arguments)}})},proxyEvents:function(){this.listenTo(this.collectionToGroup,"request",this._request),this.listenTo(this.collectionToGroup,"sync",this._sync),this.listenTo(this.collectionToGroup,"remove",this._remove),this.listenTo(this.collectionToGroup,"add",this._add),this.listenTo(this.collectionToGroup,"error",this._error)},_request:function(e,t,o){this.trigger("request",this,t,o)},_sync:function(e,t,o){this._group(),this.trigger("sync",this,t,o)},_remove:function(e,t){var o=this.filter(function(t){return-1!==t.get("items").indexOf(e)});if(o.length){var n=o[0].get("items");n.remove(e),n.length||o[0].destroy()}},_add:function(){l.debounce(this._group,50)},_error:function(){this.trigger("error")},_group:function(){var e=this,t={},o=this.collectionToGroup.groupBy(this.collectionToGroup.groupMethod);l.each(o,function(e,o){var n=c.getPeriod(o);t[n]=t[n]||[],t[n]=t[n].concat(e)}),l.each(t,function(o,n){var i=e.findWhere({periodKey:n});i?i.get("items").set(t[n],{remove:!1}):e.add({periodKey:n,periodOrder:c.getPeriodOrder(n),title:c.getPeriodTitle(n),items:new s(t[n],{comparator:e.collectionToGroup.comparator})})})}}),e.exports=t.default}),define("confluence-dashboard/modules/group/group-collection.js",function(){}),define("confluence-dashboard/modules/list-item/list-item-view",["module","exports","marionette","../../behaviors/tooltips","confluence-dashboard/soy-templates","ajs","confluence/meta"],function(e,t,o,n,i,a,r){"use strict";var s=o.ItemView,l=f(n).default,c=f(i).default,u=f(a).default,d=f(r).default;function f(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({template:c.Lists.item,className:"item",tagName:"li",templateHelpers:function(){var e=void 0,t=this.model.get("metadata").currentuser;e=t.hasOwnProperty("lastcontributed")?t.lastcontributed.status:"current";var o=d.get("enabled-dark-features");return{isCollabEditingEnabled:void 0!==o&&-1===o.indexOf("site-wide.synchrony.disable")&&-1===o.indexOf("site-wide.shared-drafts.disable"),contentType:this.model.get("type"),pageStatus:e}},behaviors:{tooltip:{behaviorClass:l,selector:".aui-lozenge.aui-lozenge-subtle"}},events:{"click a":"onClick"},ui:{lozenge:".aui-lozenge"},onClick:function(){1===this.ui.lozenge.length&&u.trigger("analytics",{name:"confluence.drafts.referrer",data:{referrerPage:"recentlyWorkedOn",lozengeType:"unpublished"===this.ui.lozenge[0].getAttribute("data-type")?"Unpublished changes":"Draft"}})}}),e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-view.js",function(){}),define("confluence-dashboard/utils/feature-discovery",["module","exports","confluence/legacy","confluence/storage-manager"],function(e,t,o,n){"use strict";var i,a=o.FeatureDiscovery;var r=(0,(i=n,i&&i.__esModule?i:{default:i}).default)("dashboard","feature-discovery");t.default={forPlugin:function(e){var t=a.forPlugin(e);return t.canShow=function(e){return!r.getItem(e)&&!t.listDiscovered().some(function(t){return t===e})},t.markDiscoveredSafe=function(e,o){r.setItemQuietly(e,!0,86400),t.markDiscovered(e,o)},t}},e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-discovery-view",["module","exports","./list-item-view","configuration","../../utils/feature-discovery","jquery"],function(e,t,o,n,i,a){"use strict";var r=u(o).default,s=n.pluginKey,l=u(i).default,c=u(a).default;function u(e){return e&&e.__esModule?e:{default:e}}var d=(document.referrer.indexOf("resumedraft.action")>-1||document.referrer.indexOf("createpage.action")>-1)&&l.forPlugin(s).canShow("recently-worked-on-drafts");t.default=r.extend({initialize:function(){this.draftDiscovery=!0===d&&this.model.collection.findWhere({status:"draft"})===this.model},templateHelpers:function(){var e=r.prototype.templateHelpers.call(this);return e.draftDiscovery=this.draftDiscovery,e},onBeforeRender:function(){!1!==this.draftDiscovery&&c(document).on("click","#draft-discovery-button",function(){l.forPlugin(s).markDiscovered("recently-worked-on-drafts"),c("#draft-discovery-dialog").remove()})},onDestroy:function(){c("#draft-discovery-dialog").remove()}}),e.exports=t.default}),define("confluence-dashboard/modules/list-item/list-item-discovery-view.js",function(){}),define("confluence-dashboard/core/content/content-as-grouped-list-discovery-view",["module","exports","./content-as-grouped-list-view","../../modules/list-item/list-item-discovery-view"],function(e,t,o,n){"use strict";var i=r(o).default,a=r(n).default;function r(e){return e&&e.__esModule?e:{default:e}}t.default=i.extend({childViewOptions:{childView:a}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-stream-view",["module","exports","../shared/base-composite-view","confluence-dashboard/soy-templates","../../behaviors/stickable/stickable","../../behaviors/infinite-loading","../../behaviors/progress-indicator","../../behaviors/analytics-tracking","../shared/no-content-view","../shared/loading-view","../shared/no-matches-view","../../modules/stream-item/stream-item-view"],function(e,t,o,n,i,a,r,s,l,c,u,d){"use strict";var f=_(o).default,h=_(n).default,p=_(i).default,m=_(a).default,v=_(r).default,g=_(s).default,b=_(l).default,w=_(c).default,y=_(u).default,x=_(d).default;function _(e){return e&&e.__esModule?e:{default:e}}t.default=f.extend({template:h.Content.streamList,childViewContainer:".list-container",emptyView:b,loadingView:w,noMatchesView:y,childView:x,behaviors:{stickMainHeader:{behaviorClass:p,element:".content-header",autoRun:!0},progressIndicator:{behaviorClass:v,dataSource:"collection",container:".spinner-container:first",size:"medium"},infiniteLoading:{behaviorClass:m,target:".list-container"},analyticsTracking:{behaviorClass:g}}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-as-stream-view.js",function(){}),define("confluence-dashboard/core/content/content-controller",["module","exports","../../utils/event-manager","../shared/scope-router","../shared/base-controller"],function(e,t,o,n,i){"use strict";var a=o.Commands,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({beforeAction:function(){},afterAction:function(){a.execute("main-app:swapContent",this.view)},initialize:function(e){if(!e||!e.routes)throw"ContentController is missing its route";this.wrapActions(),this.router=new r({scopedRoutes:e.routes,scope:e.scope||"/",controller:this})}}),e.exports=t.default}),define("confluence-dashboard/core/content/content-controller.js",function(){}),define("confluence-dashboard/behaviors/list-item-animated",["module","exports","marionette","../utils/event-manager","jquery"],function(e,t,o,n,i){"use strict";var a,r=o.View,s=o.Behavior,l=n.EventManager,c=(a=i,a&&a.__esModule?a:{default:a}).default;t.default=s.extend({initialize:function(){this.overrideViewDestroyMethod()},onRender:function(){this.$el.addClass("animated show")},overrideViewDestroyMethod:function(){var e=this;this.view.destroy=function(){var t=this,o=arguments;if(this.isDestroyed)return this;var n=r.prototype.destroy;e.onBeforeDestroyWithAnimation().then(function(){return n.apply(t,o)}).fail(function(){return n.apply(t,o)})},this.view.destroy.bind(this.view)},onBeforeDestroyWithAnimation:function(){var e=this,t=c.Deferred();return this.view.$el.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.resolve(),l.trigger("list:change",e.view)}),this.view.$el.removeClass("show").addClass("removing"),setTimeout(function(){t.isResolved||t.reject("time-out")},1e4),t.promise()}}),e.exports=t.default}),define("confluence-dashboard/behaviors/list-item-animated.js",function(){}),define("confluence-dashboard/modules/stream-item/stream-item-view",["module","exports","marionette","confluence-dashboard/soy-templates","confluence/hover-user"],function(e,t,o,n,i){"use strict";var a=o.ItemView,r=l(n).default,s=l(i).default;function l(e){return e&&e.__esModule?e:{default:e}}t.default=a.extend({template:r.Stream.item,tagName:"li",className:"grouping",onDomRefresh:function(){s()}}),e.exports=t.default}),define("confluence-dashboard/modules/stream-item/stream-item-view.js",function(){}),define("confluence-dashboard/utils/ensure-component",["module","exports","jquery"],function(e,t,o){"use strict";var n,i=(n=o,n&&n.__esModule?n:{default:n}).default;var a=function(e){return i(e).hasClass("__skate")||e.hasAttribute("resolved")};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,o=i.Deferred();return a(e)?o.resolve():function e(t){t.condition()?t.callback():setTimeout(function(){e(t)},t.interval)}({interval:t,condition:function(){return a(e)},callback:function(){o.resolve()}}),o.promise()},e.exports=t.default}),define("confluence-dashboard/utils/module-starter",["module","exports","./event-manager"],function(e,t,o){"use strict";var n=o.ReqRes;t.default={register:function(e){var t=n.request("app");if(!e||"function"!=typeof e)throw"ModuleStarter.register needs a function as callback";if(!t)throw"ModuleStarter is being called before the app is available, please review your dependencies";t.isStarted?e():t.on("start",e)}},e.exports=t.default}),define("confluence-dashboard",function(){}),require(["confluence-dashboard/index"]);