define("confluence-dashboard/modules/recently-viewed/recently-viewed-collection",["module","exports","backbone","configuration","confluence-dashboard/utils/date-utils","../../core/shared/base-collection-with-function","underscore","ajs"],function(e,t,n,a,o,r,c,l){"use strict";var i=n.Model,d=a.endpoints,s=p(o).default,u=p(r).default,f=p(c).default;function p(e){return e&&e.__esModule?e:{default:e}}var m=p(l).default.contextPath(),w=i.extend({parse:function(e){var t=e.metadata.currentuser.viewed.lastSeen,n=new Date(t),a=n.getTime();return f.extend(e,{url:m+e._links.webui,date:t,timestamp:a,lastSeenISO:s.toISODate(n),icon:"page"===e.type?"page":"blogpost"}),e}});t.default=u.extend({model:w,comparator:function(e,t){return-s.compareTimestamps(e.get("timestamp"),t.get("timestamp"))},apiParams:function(e){return{url:d.RECENTLY_VIEWED,expansions:["container","metadata.currentuser.viewed","metadata.currentuser.lastcontributed"],cql:"id in recentlyViewedContent("+this.getPageLimit(e)+", "+this.getPageOffset(e)+")",cqlcontext:'{"contentStatuses":["current","draft"]}'}},groupMethod:function(e){return e.get("lastSeenISO")}}),e.exports=t.default}),define("confluence-dashboard/modules/recently-viewed/recently-viewed-controller",["module","exports","./recently-viewed-collection","confluence-dashboard/core/content/content-as-grouped-list-view","confluence-dashboard/core/content/content-controller","confluence-dashboard/soy-templates","configuration","ajs"],function(e,t,n,a,o,r,c,l){"use strict";var i=p(n).default,d=p(a).default,s=p(o).default,u=p(r).default,f=(c.staticResourceUrl,p(l).default);function p(e){return e&&e.__esModule?e:{default:e}}t.default=s.extend({actionsToFilter:["recentViewed"],recentViewed:function(){this.view=new d({collection:new i,templateHelpers:{title:f.I18n.getText("recently.viewed.title"),contentType:this.options.name},emptyViewOptions:{template:u.RecentViewed.blank},className:"default-list-view starred-list"}),this.view.collection.fetch()}}),e.exports=t.default});