define("confluence-page-banner/page-banner",["ajs","jquery","confluence/templates","confluence/legacy","skate"],function(e,t,n,a,i){function s(){var e=t("#system-content-items");0==e.children(":not(.hidden)").length?e.addClass("hidden"):e.removeClass("hidden")}function o(){t("#page-metadata-banner").hide()}function c(e){t(document).tooltip({live:e,gravity:"n",title:"title",delayIn:500})}function r(e){if(t(".tipsy").remove(),e){var n=t(e).data("tipsy");n&&(n.hoverState="out")}}var d=function(n,a){var i=t("#content-metadata-page-restrictions"),o="";i.removeClass("aui-iconfont-locked aui-iconfont-unlocked restricted");var r=a.hasRestrictions&&!(a.hasExplicitRestrictions||a.hasInheritedRestrictions);a.hasExplicitRestrictions||r?(i.addClass("aui-icon aui-icon-small aui-iconfont-locked restricted"),o=e.I18n.getText("page.restrictions.apply")):a.hasInheritedRestrictions?(i.addClass("aui-icon aui-icon-small aui-iconfont-unlocked restricted"),o=e.I18n.getText("page.restrictions.apply")):(i.addClass("aui-icon aui-icon-small aui-iconfont-unlocked"),o=a.hasAnyExplicitRestrictions?e.I18n.getText("page.restrictions.apply"):e.I18n.getText("page.restrictions.none")),i.attr("title",o),i.attr("aria-label",o),c("#content-metadata-page-restrictions"),s()},l=function(){var n;s(),e.bind("system-content-metadata.toggled-restrictions",d),e.bind("breadcrumbs.expanded",o),t("#page-metadata-banner").css("visibility","visible"),c(n="#system-content-items a:not(.tipsy-disabled),.page-metadata-item a:not(.tipsy-disabled),.page-metadata-modification-info a.last-modified:not(tipsy-disabled),#draft-status-lozenge"),t(n).click(function(e){r(t(e.target).closest("a"))}),t(window).on("click scroll resize",r)},u=function(){e.unbind("system-content-metadata.toggled-restrictions",d),e.unbind("breadcrumbs.expanded",o)};i("system-metadata-restrictions",{type:i.types.CLASS,events:{click:function(t,n){n.preventDefault(),e.trigger("system-content-metadata.open-restrictions-dialog")}},attached:l,detached:u})}),require("confluence/module-exporter").safeRequire("confluence-page-banner/page-banner");