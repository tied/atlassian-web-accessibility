define("confluence-ui-components/js/cql/internal/cql-filter-field",["jquery","underscore","ajs","confluence-ui-components/js/cql/internal/cql-field-model","confluence-ui-components/js/cql/internal/cql-expression-builder","confluence-ui-components/js/cql/internal/filterfields/cql-filter-field-configs","confluence-ui-components/js/cql/internal/cql-soy-templates"],function(e,k,i,h,d,a,b){var f=b.Filters;var g=0;function c(o){var m=h.getLabel(o);var n=e(f().baseFilterField({label:m,field:o,counter:g++}));var l=n.find("input");n.data("fieldName",o.fieldName);return e.extend({input:l,element:n,onChange:function(p){l.change(p)}},o)}function j(q,p){var o=q.uiSupport;var s=o.valueType;var r=q.fieldName;if(!s){throw new Error("Can't create filter without valueType.")}if(!r){throw new Error("Can't create filter without fieldName.")}var n=a.getConfig(q);var l=c(q);l.asCql=k.bind(n.asCqlFunc||function(){return d.buildExpression(l,this.input.val())},l);var m=l.element.find("input");if(typeof n.setupInput==="function"){l.setupInput=n.setupInput;l.setupInput(m,p.context)}l.setValues=n.setValues||function(t){m.val(t.values.join(","))};l.element.find(".aui-iconfont-remove").click(function(){l.element.remove();p.removeField(l)});return l}return{build:j}});