{"version":3,"sources":["webpack:///../src/js/jquery/jquery.moveto.js","webpack:///./behaviours/aui.behaviour.keyboard-shortcuts.js","webpack:///../src/js/jquery/jquery.hotkeys.js","webpack:///../src/js/aui/when-i-type.js"],"names":["jQuery","fn","moveTo","options","scrollTarget","opts","extend","transition","scrollOffset","instance","this","topOffset","offset","top","window","scrollTop","height","outerHeight","animating","document","trigger","animate","jQueryCache","is","stop","setTimeout","default","TimedNumber","timer","num","keyHandler","handleObj","isPlainObject","data","isArray","origHandler","handler","combo","map","key","toLowerCase","index","event","target","test","nodeName","prop","special","type","hotkeys","specialKeys","which","character","String","fromCharCode","modif","possible","altKey","ctrlKey","metaKey","shiftKey","replace","shiftNums","pressed","val","length","reset","apply","arguments","inc","keys","split","i","len","version","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","91","96","97","98","99","100","101","102","103","104","105","106","107","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","144","145","188","190","191","224","219","221","keypressKeys","`","1","2","3","4","5","6","7","0","-","=",";","'",",",".","/","\\","each","_","prototype","clearTimeout","timeout","proxy","add","__webpack_require__","logger","_dialog","_underscore","EMPTY_SELECTOR","isMac","navigator","platform","indexOf","isSafari","userAgent","multiCharRegex","triggerClickEvent","$el","element","createEvent","initMouseEvent","dispatchEvent","whenIType","boundKeyCombos","executor","$","Callbacks","keypressHandler","e","popup","current","fire","defaultPreventionHandler","preventDefault","bindKeys","trim","forEach","keyCombo","keysArr","Array","keyString","currModifiers","modifierMatch","match","multiCharMatch","substring","push","keyComboArrayFromString","toString","eventType","hasUnprintables","_jquery2","on","bindKeyCombo","appendKeyComboInstructions","title","isFirst","i18n","getText","shift","makeShortcut","addShortcutsToTitle","selector","elem","attr","keyCombos","slice","existingCombos","shortcutInstructions","originalTitle","some","existingCombo","isEqual","concat","removeShortcutsFromTitle","shortcuts","removeData","selectorsWithTitlesModified","makeMoveToFunction","getNewFocus","focusedClass","wrapAround","hasOwnProperty","escToCancel","$items","$focusedElem","filter","moveToOptions","undefined","one","keyCode","ESCAPE","removeClass","addClass","focus","find","moveToNextItem","eq","inArray","get","moveToPrevItem","click","goTo","location","href","followLink","a","link","execute","func","self","evaluate","command","call","moveToAndClick","moveToAndFocus","$elem","or","unbind","fromJSON","json","switchCtrlToMetaOnMac","item","operation","op","param","params","Function","JSON","parse","error","shortcutList","shortcutString","newShortcut","iframe","load","contents","_globalize2"],"mappings":"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","file":"aui.chunk.1d1f2f1569883ea2f804--fc31f8322fe15440ef89.js","sourcesContent":["/**\n *\n * @module Controls\n * @requires AJS, jQuery\n */\n\n/**\n * If not visible, moves the scroll position of the screen to the element\n *\n * <pre>\n * <strong>Usage:</strong>\n * jQuery(\"li.item\").moveTo();\n * </pre>\n *\n * This plugin also supports options as an argument.  The options\n * that can be defined are:\n * <ul>\n * <li>transition - if set to true will cause a smooth scrolling transition (false by default)</li>\n * <li>scrollOffset - defines an offset to scroll past the element to view in pixels such that\n * all of it can be viewed (35 pixels by default)</li>\n * </ul>\n *\n * @class moveTo\n * @constuctor moveTo\n * @namespace jQuery.fn\n * @param {Object} options\n */\njQuery.fn.moveTo = function (options) {\n    var defaults = {\n        transition: false,\n        scrollOffset: 35\n    };\n\n    var opts = jQuery.extend(defaults, options);\n    var instance = this;\n    var topOffset = instance.offset().top;\n    var scrollTarget;\n\n    if ((jQuery(window).scrollTop() + jQuery(window).height() - this.outerHeight() < topOffset ||\n            jQuery(window).scrollTop() + opts.scrollOffset > topOffset) &&\n            jQuery(window).height() > opts.scrollOffset) {\n\n        if (jQuery(window).scrollTop() + opts.scrollOffset > topOffset) {\n            //move up\n            scrollTarget = topOffset - (jQuery(window).height() - this.outerHeight()) + opts.scrollOffset;\n        } else {\n            //move down\n            scrollTarget = topOffset - opts.scrollOffset;\n        }\n\n        if (!jQuery.fn.moveTo.animating && opts.transition) {\n            jQuery(document).trigger('moveToStarted', this);\n            jQuery.fn.moveTo.animating = true;\n            jQuery('html,body').animate({\n                scrollTop: scrollTarget\n            }, 1000, function () {\n                jQuery(document).trigger('moveToFinished', instance);\n                delete jQuery.fn.moveTo.animating;\n            });\n            return this;\n        } else {\n            var jQueryCache =  jQuery('html, body');\n            if (jQueryCache.is(':animated')) {\n                jQueryCache.stop();\n                delete jQuery.fn.moveTo.animating;\n            }\n\n            jQuery(document).trigger('moveToStarted');\n            jQuery(window).scrollTop(scrollTarget);\n            //need to put a slight timeout for the moveToFinished event such that recipients of this event\n            //have time to act on it.\n            setTimeout(function () {\n                jQuery(document).trigger('moveToFinished', instance);\n            }, 100);\n            return this;\n        }\n    }\n    jQuery(document).trigger('moveToFinished', this);\n    return this;\n};\n","export {default as whenIType} from '@atlassian/aui/src/js/aui/when-i-type';\n","/*\n * Modified by Atlassian to allow chaining of keys\n *\n * jQuery Hotkeys Plugin\n * Copyright 2010, John Resig\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Based upon the plugin by Tzury Bar Yochay:\n * http://github.com/tzuryby/hotkeys\n *\n * Original idea by:\n * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/\n*/\n\n(function(jQuery){\n\n    jQuery.hotkeys = {\n        version: \"0.8\",\n\n        specialKeys: {\n            8: \"backspace\", 9: \"tab\", 13: \"return\", 16: \"shift\", 17: \"ctrl\", 18: \"alt\", 19: \"pause\",\n            20: \"capslock\", 27: \"esc\", 32: \"space\", 33: \"pageup\", 34: \"pagedown\", 35: \"end\", 36: \"home\",\n            37: \"left\", 38: \"up\", 39: \"right\", 40: \"down\", 45: \"insert\", 46: \"del\",\n            91 : \"meta\",\n            96: \"0\", 97: \"1\", 98: \"2\", 99: \"3\", 100: \"4\", 101: \"5\", 102: \"6\", 103: \"7\",\n            104: \"8\", 105: \"9\", 106: \"*\", 107: \"+\", 109: \"-\", 110: \".\", 111 : \"/\",\n            112: \"f1\", 113: \"f2\", 114: \"f3\", 115: \"f4\", 116: \"f5\", 117: \"f6\", 118: \"f7\", 119: \"f8\",\n            120: \"f9\", 121: \"f10\", 122: \"f11\", 123: \"f12\", 144: \"numlock\", 145: \"scroll\",\n            188: \",\", 190: \".\", 191: \"/\", 224: \"meta\", 219: '[', 221: ']'\n        },\n\n        // These only work under Mac Gecko when using keypress (see http://unixpapa.com/js/key.html).\n        keypressKeys: [ \"<\", \">\", \"?\" ],\n\n        shiftNums: {\n            \"`\": \"~\", \"1\": \"!\", \"2\": \"@\", \"3\": \"#\", \"4\": \"$\", \"5\": \"%\", \"6\": \"^\", \"7\": \"&\",\n            \"8\": \"*\", \"9\": \"(\", \"0\": \")\", \"-\": \"_\", \"=\": \"+\", \";\": \":\", \"'\": \"\\\"\", \",\": \"<\",\n            \".\": \">\",  \"/\": \"?\",  \"\\\\\": \"|\"\n        }\n    };\n\n    jQuery.each(jQuery.hotkeys.keypressKeys, function (_, key) {\n        jQuery.hotkeys.shiftNums[ key ] = key;\n    });\n\n    function TimedNumber(timer) {\n        this.num = 0;\n        this.timer = timer > 0 ? timer : false;\n    }\n    TimedNumber.prototype.val = function () {\n        return this.num;\n    };\n    TimedNumber.prototype.inc = function () {\n        if (this.timer) {\n            clearTimeout(this.timeout);\n            this.timeout = setTimeout(jQuery.proxy(TimedNumber.prototype.reset, this), this.timer);\n        }\n        this.num++;\n    };\n    TimedNumber.prototype.reset = function () {\n        if (this.timer) {\n            clearTimeout(this.timeout);\n        }\n        this.num = 0;\n    };\n\n    function keyHandler( handleObj ) {\n        // Only care when a possible input has been specified\n        if ( !(jQuery.isPlainObject(handleObj.data) || jQuery.isArray(handleObj.data) || typeof handleObj.data === \"string\") ) {\n            return;\n        }\n\n        var origHandler = handleObj.handler,\n            options = {\n                timer: 700,\n                combo: []\n            };\n\n        (function (data) {\n            if (typeof data === 'string') {\n                options.combo = [ data ];\n            } else if (jQuery.isArray(data)) {\n                options.combo = data;\n            } else {\n                jQuery.extend(options, data);\n            }\n            options.combo = jQuery.map(options.combo, function (key) {\n                return key.toLowerCase();\n            });\n        })(handleObj.data);\n\n        handleObj.index = new TimedNumber(options.timer);\n        handleObj.handler = function( event ) {\n            // Don't fire in text-accepting inputs that we didn't directly bind to\n            // important to note that jQuery.fn.prop is only available on jquery 1.6+\n            if ( this !== event.target && (/textarea|select|input/i.test( event.target.nodeName ) ||\n                jQuery(event.target).prop('contenteditable') === 'true' )) {\n                return;\n            }\n\n            // Keypress represents characters, not special keys\n            var special = event.type !== 'keypress' ? jQuery.hotkeys.specialKeys[ event.which ] : null,\n                character = String.fromCharCode( event.which ).toLowerCase(),\n                key, modif = \"\", possible = {};\n\n            // check combinations (alt|ctrl|shift+anything)\n            if ( event.altKey && special !== \"alt\" ) {\n                modif += \"alt+\";\n            }\n\n            if ( event.ctrlKey && special !== \"ctrl\" ) {\n                modif += \"ctrl+\";\n            }\n\n            // TODO: Need to make sure this works consistently across platforms\n            if ( event.metaKey && !event.ctrlKey && special !== \"meta\" ) {\n                modif += \"meta+\";\n            }\n\n            if ( event.shiftKey && special !== \"shift\" ) {\n                modif += \"shift+\";\n            }\n\n            // Under Chrome and Safari, meta's keycode == '['s charcode\n            // Even if they did type this key combo we could not use it because it is browser back in Chrome/Safari on OS X\n            if (event.metaKey && character === '[') {\n                character = null;\n            }\n\n            if (special) {\n                possible[ modif + special ] = true;\n            }\n            if (character) {\n                possible[ modif + character ] = true;\n            }\n\n            // \"$\" can be specified as \"shift+4\" or \"$\"\n            if ( /shift+/.test(modif) ) {\n                possible [ modif.replace('shift+', '') + jQuery.hotkeys.shiftNums[ (special || character) ] ] = true;\n            }\n\n            var index = handleObj.index,\n                combo = options.combo;\n\n            if ( pressed(combo[index.val()], possible) ) {\n                if ( index.val() === combo.length - 1 ) {\n                    index.reset();\n                    return origHandler.apply(this, arguments);\n                } else {\n                    index.inc();\n                }\n            } else {\n                index.reset();\n                // For mutli-key combinations, we might have restarted the key sequence.\n                if ( pressed(combo[0], possible) ) {\n                    index.inc();\n                }\n            }\n        };\n    }\n\n    function pressed(key, possible) {\n        var keys = key.split(' ');\n        for (var i = 0, len = keys.length; i < len; i++) {\n            if ( possible[keys[i]] ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    jQuery.each([ \"keydown\", \"keyup\", \"keypress\" ], function() {\n        jQuery.event.special[ this ] = { add: keyHandler };\n    });\n\n})( jQuery );\n","import $ from './jquery';\nimport '../jquery/jquery.hotkeys';\nimport '../jquery/jquery.moveto';\nimport i18n from './i18n';\nimport * as logger from './internal/log';\nimport { popup } from './dialog';\nimport globalize from './internal/globalize';\nimport keyCode from './key-code';\nimport { isEqual } from 'underscore';\n\nconst EMPTY_SELECTOR = false;\n\nvar isMac = navigator.platform.indexOf('Mac') !== -1;\nvar isSafari = navigator.userAgent.indexOf('Safari') !== -1;\nvar multiCharRegex = /^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\\d\\d?|numlock|meta)/i;\n\n/**\n * Trigger native click event.\n * @param $el\n */\nconst triggerClickEvent = ($el) => {\n    const element = $el[0];\n\n    if (element) {\n        // Native event bubbles are compatible with Synthetic Event from React\n        const bubbles = true;\n        const cancelable = true;\n        const event = document.createEvent('MouseEvent');\n        event.initMouseEvent('click', bubbles, cancelable, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        element.dispatchEvent(event);\n    }\n};\n\n\n/**\n * Keyboard commands with syntactic sugar.\n *\n * <strong>Usage:</strong>\n * <pre>\n * whenIType(\"gh\").or(\"gd\").goTo(\"/secure/Dashboard.jspa\");\n * whenIType(\"c\").click(\"#create_link\");\n * </pre>\n *\n * @param keys - Key combinations, modifier keys are \"+\" deliminated. e.g \"ctrl+b\"\n */\nfunction whenIType (keys) {\n    var boundKeyCombos = [];\n    var executor = $.Callbacks();\n\n    function keypressHandler(e) {\n        if (!popup.current && executor) {\n            executor.fire(e);\n        }\n    }\n\n    function defaultPreventionHandler(e) {\n        e.preventDefault();\n    }\n\n    // Bind an arbitrary set of keys by calling bindKeyCombo on each triggering key combo.\n    // A string like \"abc 123\" means (a then b then c) OR (1 then 2 then 3). abc is one key combo, 123 is another.\n    function bindKeys(keys) {\n        var keyCombos = keys && keys.split ? $.trim(keys).split(' ') : [keys];\n\n        keyCombos.forEach(function (keyCombo) {\n            bindKeyCombo(keyCombo);\n        });\n    }\n\n    function hasUnprintables(keysArr) {\n        // a bit of a heuristic, but works for everything we have. Only the unprintable characters are represented with > 1-character names.\n        var i = keysArr.length;\n        while (i--) {\n            if (keysArr[i].length > 1 && keysArr[i] !== 'space') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    // bind a single key combo to this handler\n    // A string like \"abc 123\" means (a then b then c) OR (1 then 2 then 3). abc is one key combo, 123 is another.\n    function bindKeyCombo(keyCombo) {\n        var keysArr = keyCombo instanceof Array ?\n            keyCombo :\n            keyComboArrayFromString(keyCombo.toString());\n        var eventType = hasUnprintables(keysArr) ? 'keydown' : 'keypress';\n\n        boundKeyCombos.push(keysArr);\n        $(document).on(eventType, EMPTY_SELECTOR, keysArr, keypressHandler);\n\n        // Override browser/plugins\n        $(document).on(eventType + ' keyup', EMPTY_SELECTOR, keysArr, defaultPreventionHandler);\n    }\n\n    // parse out an array of (modifier+key) presses from a single string\n    // e.g. \"12ctrl+3\" becomes [ \"1\", \"2\", \"ctrl+3\" ]\n    function keyComboArrayFromString(keyString) {\n        var keysArr = [];\n        var currModifiers = '';\n\n        while (keyString.length) {\n            var modifierMatch = keyString.match(/^(ctrl|meta|shift|alt)\\+/i);\n            var multiCharMatch = keyString.match(multiCharRegex);\n\n            if (modifierMatch) {\n                currModifiers += modifierMatch[0];\n                keyString = keyString.substring(modifierMatch[0].length);\n\n            } else if (multiCharMatch) {\n                keysArr.push(currModifiers + multiCharMatch[0]);\n                keyString = keyString.substring(multiCharMatch[0].length);\n                currModifiers = '';\n\n            } else {\n                keysArr.push(currModifiers + keyString[0]);\n                keyString = keyString.substring(1);\n                currModifiers = '';\n            }\n        }\n\n        return keysArr;\n    }\n\n    function addShortcutsToTitle(selector) {\n        var elem = $(selector);\n        var title = elem.attr('title') || '';\n        var keyCombos = boundKeyCombos.slice();\n        var existingCombos = elem.data('boundKeyCombos') || [];\n        var shortcutInstructions = elem.data('kbShortcutAppended') || '';\n        var isFirst = !shortcutInstructions;\n        var originalTitle = isFirst ? title : title.substring(0, title.length - shortcutInstructions.length);\n\n        while (keyCombos.length) {\n            var keyCombo = keyCombos.shift();\n            var comboAlreadyExists = existingCombos.some(function(existingCombo) {\n                return isEqual(keyCombo, existingCombo);\n            });\n            if (!comboAlreadyExists) {\n                shortcutInstructions = appendKeyComboInstructions(keyCombo.slice(), shortcutInstructions, isFirst);\n                isFirst = false;\n            }\n        }\n\n        if (isMac) {\n            shortcutInstructions = shortcutInstructions\n                .replace(/Meta/ig, '\\u2318') //Apple cmd key\n                .replace(/Shift/ig, '\\u21E7'); //Apple Shift symbol\n        }\n\n        elem.attr('title', originalTitle + shortcutInstructions);\n        elem.data('kbShortcutAppended', shortcutInstructions);\n        elem.data('boundKeyCombos', existingCombos.concat(boundKeyCombos));\n    }\n\n    function removeShortcutsFromTitle(selector) {\n        var elem = $(selector);\n        var shortcuts = elem.data('kbShortcutAppended');\n\n        if (!shortcuts) {\n            return;\n        }\n\n        var title = elem.attr('title');\n        elem.attr('title', title.replace(shortcuts, ''));\n        elem.removeData('kbShortcutAppended');\n        elem.removeData('boundKeyCombos');\n    }\n\n    //\n    function appendKeyComboInstructions(keyCombo, title, isFirst) {\n        if (isFirst) {\n            title += ' (' + i18n.getText('aui.keyboard.shortcut.type.x', keyCombo.shift());\n        } else {\n            title = title.replace(/\\)$/, '');\n            title += i18n.getText('aui.keyboard.shortcut.or.x', keyCombo.shift());\n        }\n\n        keyCombo.forEach(function (key) {\n            title += ' ' + i18n.getText('aui.keyboard.shortcut.then.x', key);\n        });\n        title += ')';\n\n        return title;\n    }\n\n    bindKeys(keys);\n\n    return whenIType.makeShortcut({\n        executor: executor,\n        bindKeys: bindKeys,\n        addShortcutsToTitle: addShortcutsToTitle,\n        removeShortcutsFromTitle: removeShortcutsFromTitle,\n        keypressHandler: keypressHandler,\n        defaultPreventionHandler: defaultPreventionHandler\n    });\n}\n\nwhenIType.makeShortcut = function (options) {\n    var executor = options.executor;\n    var bindKeys = options.bindKeys;\n    var addShortcutsToTitle = options.addShortcutsToTitle;\n    var removeShortcutsFromTitle = options.removeShortcutsFromTitle;\n    var keypressHandler = options.keypressHandler;\n    var defaultPreventionHandler = options.defaultPreventionHandler;\n\n    var selectorsWithTitlesModified = [];\n\n    function makeMoveToFunction(getNewFocus) {\n        return function (selector, options) {\n            options = options || {};\n            var focusedClass = options.focusedClass || 'focused';\n            var wrapAround = options.hasOwnProperty('wrapAround') ? options.wrapAround : true;\n            var escToCancel = options.hasOwnProperty('escToCancel') ? options.escToCancel : true;\n\n            executor.add(function () {\n\n                const $items = $(selector);\n                let $focusedElem = $items.filter('.' + focusedClass);\n                const moveToOptions = $focusedElem.length === 0 ? undefined : {transition: true};\n\n                if (escToCancel) {\n                    $(document).one('keydown', function (e) {\n                        if (e.keyCode === keyCode.ESCAPE && $focusedElem) {\n                            $focusedElem.removeClass(focusedClass);\n                        }\n                    });\n                }\n\n                if ($focusedElem.length) {\n                    $focusedElem.removeClass(focusedClass);\n                }\n\n                $focusedElem = getNewFocus($focusedElem, $items, wrapAround);\n\n                if ($focusedElem && $focusedElem.length > 0) {\n                    $focusedElem.addClass(focusedClass);\n                    $focusedElem.moveTo(moveToOptions);\n                    if ($focusedElem.is('a')) {\n                        $focusedElem.focus();\n                    } else {\n                        $focusedElem.find('a:first').focus();\n                    }\n                }\n            });\n            return this;\n        };\n    }\n\n    return {\n\n        /**\n         * Scrolls to and adds <em>focused</em> class to the next item in the jQuery collection\n         *\n         * @method moveToNextItem\n         * @param selector\n         * @param options\n         * @return {Object}\n         */\n        moveToNextItem: makeMoveToFunction(function ($focusedElem, $items, wrapAround) {\n            var index;\n\n            if (wrapAround && $focusedElem.length === 0) {\n                return $items.eq(0);\n\n            } else {\n                index = $.inArray($focusedElem.get(0), $items);\n                if (index < $items.length - 1) {\n                    index = index + 1;\n                    return $items.eq(index);\n                } else if (wrapAround) {\n                    return $items.eq(0);\n                }\n            }\n\n            return $focusedElem;\n        }),\n        /**\n         * Scrolls to and adds <em>focused</em> class to the previous item in the jQuery collection\n         *\n         * @method moveToPrevItem\n         * @param selector\n         * @param focusedClass\n         * @return {Object}\n         */\n        moveToPrevItem: makeMoveToFunction(function ($focusedElem, $items, wrapAround) {\n            var index;\n            if (wrapAround && $focusedElem.length === 0) {\n                return $items.filter(':last');\n\n            } else {\n                index = $.inArray($focusedElem.get(0), $items);\n                if (index > 0) {\n                    index = index - 1;\n                    return $items.eq(index);\n                } else if (wrapAround) {\n                    return $items.filter(':last');\n                }\n            }\n\n            return $focusedElem;\n        }),\n\n        /**\n         * Clicks the element specified by the <em>selector</em> argument.\n         *\n         * @method click\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        click: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                const $el = $(selector);\n                triggerClickEvent($el);\n            });\n            return this;\n        },\n\n        /**\n         * Navigates to specified <em>location</em>\n         *\n         * @method goTo\n         * @param {String} location - http location\n         * @return {Object}\n         */\n        goTo: function (location) {\n            executor.add(function () {\n                window.location.href = location;\n            });\n            return this;\n        },\n\n        /**\n         * navigates browser window to link href\n         *\n         * @method followLink\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        followLink: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                var elem = $(selector)[0];\n                if (elem && {'a': true, 'link': true}[ elem.nodeName.toLowerCase() ]) {\n                    window.location.href = elem.href;\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Executes function\n         *\n         * @method execute\n         * @param {function} func\n         * @return {Object}\n         */\n        execute: function (func) {\n            var self = this;\n            executor.add(function () {\n                func.apply(self, arguments);\n            });\n            return this;\n        },\n\n        /**\n         * @deprecated This implementation is uncool. Kept around to satisfy Confluence plugin devs in the short term.\n         *\n         * Executes the javascript provided by the shortcut plugin point _immediately_.\n         *\n         * @method evaluate\n         * @param {Function} command - the function provided by the shortcut key plugin point\n         */\n        evaluate: function (command) {\n            command.call(this);\n        },\n\n        /**\n         * Scrolls to element if out of view, then clicks it.\n         *\n         * @method moveToAndClick\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        moveToAndClick: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function () {\n                const $el = $(selector);\n                if ($el.length > 0) {\n                    triggerClickEvent($el);\n                    $el.moveTo();\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Scrolls to element if out of view, then focuses it\n         *\n         * @method moveToAndFocus\n         * @param selector - jQuery selector for element\n         * @return {Object}\n         */\n        moveToAndFocus: function (selector) {\n            selectorsWithTitlesModified.push(selector);\n            addShortcutsToTitle(selector);\n\n            executor.add(function (e) {\n                var $elem = $(selector);\n                if ($elem.length > 0) {\n                    $elem.focus();\n                    if ($elem.moveTo) {\n                        $elem.moveTo();\n                    }\n                    if ($elem.is(':input')) {\n                        e.preventDefault();\n                    }\n                }\n            });\n            return this;\n        },\n\n        /**\n         * Binds additional keyboard controls\n         *\n         * @method or\n         * @param {String} keys - keys to bind\n         * @return {Object}\n         */\n        or: function (keys) {\n            bindKeys(keys);\n            return this;\n        },\n\n        /**\n         * Unbinds shortcut keys\n         *\n         * @method unbind\n         */\n        unbind: function () {\n            $(document)\n                .unbind('keydown keypress', keypressHandler)\n                .unbind('keydown keypress keyup', defaultPreventionHandler);\n\n            for (var i = 0, len = selectorsWithTitlesModified.length; i < len; i++) {\n                removeShortcutsFromTitle(selectorsWithTitlesModified[i]);\n            }\n            selectorsWithTitlesModified = [];\n        }\n    };\n};\n\n/**\n * Creates keyboard commands and their actions from json data. Format looks like:\n *\n * <pre>\n * [\n *   {\n *        \"keys\":[[\"g\", \"d\"]],\n *        \"context\":\"global\",\n *        \"op\":\"followLink\",\n *        \"param\":\"#home_link\"\n *    },\n *    {\n *        \"keys\":[[\"g\", \"i\"]],\n *        \"context\":\"global\",\n *        \"op\":\"followLink\",\n *        \"param\":\"#find_link\"\n *    },\n *    {\n *        \"keys\":[[\"/\"]],\n *        \"context\":\"global\",\n *        \"op\":\"moveToAndFocus\",\n *        \"param\":\"#quickSearchInput\"\n *    },\n *    {\n *        \"keys\":[[\"c\"]],\n *        \"context\":\"global\",\n *        \"op\":\"moveToAndClick\",\n *        \"param\":\"#create_link\"\n *    }\n * ]\n * </pre>\n *\n * @method fromJSON\n * @static\n * @param json\n */\nwhenIType.fromJSON = function (json, switchCtrlToMetaOnMac) {\n    var shortcuts = [];\n\n    if (json) {\n        $.each(json, function (i,item) {\n            const operation = item.op;\n            const param = item.param;\n            let params;\n\n            if (operation === 'execute' || operation === 'evaluate') {\n                // need to turn function string into function object\n                params = [new Function(param)];\n\n            } else if (/^\\[[^\\]\\[]*,[^\\]\\[]*\\]$/.test(param)) {\n                // pass in an array to send multiple params\n                try {\n                    params = JSON.parse(param);\n                } catch (e) {\n                    logger.error('When using a parameter array, array must be in strict JSON format: ' + param);\n                }\n\n                if (!$.isArray(params)) {\n                    logger.error('Badly formatted shortcut parameter. String or JSON Array of parameters required: ' + param);\n                }\n\n            } else {\n                params = [param];\n            }\n\n            $.each(item.keys, function () {\n\n                var shortcutList = this;\n                if (switchCtrlToMetaOnMac && isMac) {\n                    shortcutList = $.map(shortcutList, function (shortcutString) {\n                        return shortcutString.replace(/ctrl/i, 'meta');\n                    });\n                }\n\n                var newShortcut = whenIType(shortcutList);\n                newShortcut[operation].apply(newShortcut, params);\n                shortcuts.push(newShortcut);\n            });\n\n        });\n    }\n\n    return shortcuts;\n};\n\n// Trigger this event on an iframe if you want its keypress events to be propagated (Events to work in iframes).\n$(document).on('iframeAppended', function (e, iframe) {\n    $(iframe).load(function () {\n        var $target = $(iframe).contents();\n\n        $target.on('keyup keydown keypress', function (e) {\n            // safari propagates keypress events from iframes\n            if (isSafari && e.type === 'keypress') {\n                return;\n            }\n\n            if (!$(e.target).is(':input')) {\n                $.event.trigger(\n                    e,\n                    arguments, // Preserve original event data.\n                    document,  // Bubble this event from the iframe's document to its parent document.\n                    true       // Use the capturing phase to preserve original event.target.\n                );\n            }\n        });\n    });\n});\n\nglobalize('whenIType', whenIType);\n\nexport default whenIType;\n"],"sourceRoot":""}