(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.489a76bc13"],{Jqxc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=i("QFBp"),s=a(i("qT0E")),r=a(i("KloK"));function a(t){return t&&t.__esModule?t:{default:t}}var n=s.default.Collection.extend({initialize:function(t,e){e||(e={}),e.matcher&&(this.matcher=e.matcher),e.model&&(this.model=e.model),this._idAttribute=(new this.model).idAttribute,this._maxResults=e.maxResults||5,this._queryData=e.queryData||{},this._queryParamKey=e.queryParamKey||"q",this._queryEndpoint=e.queryEndpoint||"",this.value=null,this.queryCache={},this.activeQueryCount=0,(0,u.bindAll)(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(t){var e,i,u=this;this.value=t,i=this.getFilteredResults(t),this.respond(t,i),t&&this._queryEndpoint&&!this.hasQueryCache(t)&&this.shouldGetMoreResults(i)&&(e=this.fetch(t),this.activeQueryCount++,this.trigger("activity",{activity:!0}),e.always(function(){u.activeQueryCount--,u.trigger("activity",{activity:!!u.activeQueryCount})}),e.done(function(e,i,s){u.addQueryCache(t,e,s)}),e.done(function(){t=u.value,i=u.getFilteredResults(t),u.respond(t,i)}))},getQueryData:function(t){var e=(0,u.isFunction)(this._queryData)?this._queryData(t):this._queryData,i=(0,u.extend)({},e);return i[this._queryParamKey]=t,i},fetch:function(t){var e={add:!0,update:!0,remove:!1,data:this.getQueryData(t)};return s.default.Collection.prototype.fetch.call(this,e)},respond:function(t,e){return this.trigger("respond",{query:t,results:e}),e},matcher:function(t,e){},getFilteredResults:function(t){var e=[];return t?(e=this.filter(function(e){return!!this.matcher(e,t)},this),this._maxResults&&(e=(0,u.first)(e,this._maxResults)),e):e},addQueryCache:function(t,e,i){var s=this.queryCache,r=this.parse(e,i);s[t]=(0,u.pluck)(r,this._idAttribute)},hasQueryCache:function(t){return this.queryCache.hasOwnProperty(t)},findQueryCache:function(t){return this.queryCache[t]},shouldGetMoreResults:function(t){return t.length<this._maxResults},setMaxResults:function(t){this._maxResults=t,this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,r.default)("ProgressiveDataSet",n),e.default=n,t.exports=e.default}}]);