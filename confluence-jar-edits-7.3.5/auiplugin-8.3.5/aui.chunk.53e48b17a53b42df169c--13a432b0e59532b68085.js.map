{"version":3,"sources":["webpack:///./deprecated/aui.component.inline-dialog1.js","webpack:///../src/js/aui/inline-dialog.js"],"names":["default","__webpack_require__","_browser","deprecate","logger","InlineDialog","items","identifier","url","options","hasOwnProperty","onTopDeprecationLogger","onTop","undefined","gravity","String","Math","random","replace","_jquery2","length","hash","hideDelayTimer","showTimer","escapedIdentifier","_css2","opts","$","extend","offsetX","offsetY","mousePosition","targetPosition","beingShown","shouldShow","contentLoaded","popup","arrow","contents","find","displayShadow","addClass","autoWidth","width","on","mouseenter","clearTimeout","unbind","mouseleave","hidePopup","getHash","hide","id","show","showPopup","persistent","reset","viewportHeight","window","height","popupMaxHeight","round","children","css","positions","calculatePositions","displayAboveDeprecationLogger","displayAbove","popupCss","removeClass","hasClass","arrowCss","drawPopup","fadeIn","fadeTime","needsLayeringShim","jQueryCache","prepend","outerWidth","outerHeight","is","setTimeout","addActiveClass","bindHideEvents","current","document","trigger","showDelay","delay","get","_datePickerPopup","preHideCallback","call","hideDelay","unbindHideEvents","fadeOut","hideCallback","cacheContent","contentLoading","initPopup","e","$trigger","upfrontCallback","each","this","closeOthers","target","x","pageX","y","pageY","offset","left","top","isFunction","initCallback","data","status","xhr","html","responseHandler","added","appendPopup","container","append","$items","onHover","useLiveEvents","selector","log","noBind","shouldCloseOnTriggerClick","closeOnTriggerClick","bindHideOnExternalClick","bindHideOnEscPressed","unbindHideOnExternalClick","unbindHideOnEscPressed","hasBoundOnExternalClick","externalClickNamespace","bind","closest","onKeydown","keyCode","ESCAPE","off","stopPropagation","refresh","getOptions","dimensionsOf","el","$el","calculateWestPositions","dimensions","arrowOffsetX","arrowOffsetY","isConstrainedScroll","toLowerCase","$scrollContainer","$scrollWindow","parent","scrollContainerOffset","scrollWindowOffset","triggerOffset","triggerBBox","getBBox","screenPadding","arrowMargin","scrollTop","scrollLeft","scrollContainer","dialog","getDimensions","win","triggerScrollOffset","halfTriggerHeight","floor","halfPopupHeight","halfArrowHeight","spaceOnLeft","spaceOnRight","enoughSpaceOnLeft","arrowScreenTop","arrowScreenBottom","min","middleOfTrigger","spaceAboveMiddleOfTrigger","max","spaceBelowMiddleOfTrigger","isOverflowingAbove","isOverflowingBelow","calculateNorthSouthPositions","viewportDimensions","targetDimensions","popupDimensions","arrowDimensions","bottomOfViewablePage","pageYOffset","documentElement","diff","enoughRoomAbove","isRelativeToMouse","right","popupLeftEdge","construct","alternativeName","getMessageLogger","extraInfo","_globalize2"],"mappings":"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","file":"aui.chunk.53e48b17a53b42df169c--13a432b0e59532b68085.js","sourcesContent":["import '../../src/less/inline-dialog.less';\nexport {default as InlineDialog} from '../../src/js/aui/inline-dialog';\n","import $ from './jquery';\nimport { needsLayeringShim } from './internal/browser';\nimport * as deprecate from './internal/deprecation';\nimport * as logger from './internal/log';\nimport globalize from './internal/globalize';\nimport keyCode from './key-code';\nimport cssEscape from 'css.escape';\n\n/* eslint quotmark:off, eqeqeq:off, strict:off, complexity:off */\n\n/**\n * Creates a new inline dialog.\n *\n * @param items jQuery object - the items that trigger the display of this popup when the user mouses over.\n * @param identifier A unique identifier for this popup. This should be unique across all popups on the page and a valid CSS class.\n * @param url The URL to retrieve popup contents.\n * @param options Custom options to change default behaviour. See InlineDialog.opts for default values and valid options.\n */\nfunction InlineDialog (items, identifier, url, options) {\n    options = options || [];\n\n    if (options.hasOwnProperty('onTop')) {\n        onTopDeprecationLogger();\n        if (options.onTop && options.gravity === undefined) {\n            options.gravity = 's';\n        }\n    }\n\n    // attempt to generate a random identifier if it doesn't exist\n    if (typeof identifier === 'undefined') {\n        identifier = String(Math.random()).replace('.', '');\n\n        // if the generated supplied identifier already exists when combined with the prefixes we'll be using, then bail\n        if ($('#inline-dialog-' + identifier + ', #arrow-' + identifier + ', #inline-dialog-shim-' + identifier).length) {\n            throw 'GENERATED_IDENTIFIER_NOT_UNIQUE';\n        }\n    }\n\n    const escapedIdentifier = cssEscape(identifier);\n\n    var opts = $.extend(false, InlineDialog.opts, options);\n    if (opts.gravity === 'w') {\n        // TODO Once support for gravity: 'e' is added, it should also\n        //      transpose the defaults for offsetX and offsetY.\n        opts.offsetX = options.offsetX === undefined ? 10 : options.offsetX;\n        opts.offsetY = options.offsetY === undefined ? 0 : options.offsetY;\n    }\n\n    var hash;\n    var hideDelayTimer;\n    var showTimer;\n    var beingShown = false;\n    var shouldShow = false;\n    var contentLoaded = false;\n    var mousePosition;\n    var targetPosition;\n    var popup  = $('<div id=\"inline-dialog-' + identifier +\n        '\" class=\"aui-inline-dialog\"><div class=\"aui-inline-dialog-contents contents\"></div><div id=\"arrow-' +\n        identifier + '\" class=\"aui-inline-dialog-arrow arrow aui-css-arrow\"></div></div>');\n\n    var arrow = $('#arrow-' + escapedIdentifier, popup);\n    var contents = popup.find('.contents');\n\n    if (!opts.displayShadow) {\n        contents.addClass('aui-inline-dialog-no-shadow');\n    }\n\n    if (opts.autoWidth) {\n        contents.addClass('aui-inline-dialog-auto-width');\n    } else {\n        contents.width(opts.width);\n    }\n\n    contents.on({\n        mouseenter: function () {\n            clearTimeout(hideDelayTimer);\n            popup.unbind('mouseenter');\n        },\n        mouseleave: function () {\n            hidePopup();\n        }\n    });\n\n    var getHash = function () {\n        if (!hash) {\n            hash = {\n                popup: popup,\n                hide: function () {\n                    hidePopup(0);\n                },\n                id: identifier,\n                show: function () {\n                    showPopup();\n                },\n                persistent: opts.persistent ? true : false,\n                reset: function () {\n\n                    function drawPopup (popup, positions) {\n                        //Position the popup using the left and right parameters\n                        popup.css(positions.popupCss);\n\n                        arrow.removeClass('aui-bottom-arrow aui-left-arrow aui-right-arrow');\n                        if (positions.gravity === 's' && !arrow.hasClass('aui-bottom-arrow')) {\n                            arrow.addClass('aui-bottom-arrow');\n                        } else if (positions.gravity === 'w') {\n                            arrow.addClass('aui-left-arrow');\n                        } else if (positions.gravity === 'e') {\n                            arrow.addClass('aui-right-arrow');\n                        }\n                        // Default styles are for 'n' gravity.\n\n                        arrow.css(positions.arrowCss);\n                    }\n\n                    //DRAW POPUP\n                    var viewportHeight = $(window).height();\n                    var popupMaxHeight = Math.round(viewportHeight * 0.75);\n                    popup.children('.aui-inline-dialog-contents')\n                        .css('max-height', popupMaxHeight);\n\n                    var positions = opts.calculatePositions(popup, targetPosition, mousePosition, opts);\n                    if (positions.hasOwnProperty('displayAbove')) {\n                        displayAboveDeprecationLogger();\n                        positions.gravity = positions.displayAbove ? 's' : 'n';\n                    }\n\n                    drawPopup(popup, positions);\n\n                    // reset position of popup box\n                    popup.fadeIn(opts.fadeTime, function () {\n                        // once the animation is complete, set the tracker variables\n                        // beingShown = false; // is this necessary? Maybe only the shouldShow will have to be reset?\n                    });\n\n                    if (needsLayeringShim()) {\n                        // iframeShim, prepend if it doesnt exist\n                        var jQueryCache = $('#inline-dialog-shim-' + escapedIdentifier);\n                        if (!jQueryCache.length) {\n                            $(popup).prepend($('<iframe class = \"inline-dialog-shim\" id=\"inline-dialog-shim-' + identifier + '\" frameBorder=\"0\" src=\"javascript:false;\"></iframe>'));\n                        }\n                        // adjust height and width of shim according to the popup\n                        jQueryCache.css({\n                            width: contents.outerWidth(),\n                            height: contents.outerHeight()\n                        });\n                    }\n                }\n            };\n        }\n        return hash;\n    };\n\n    var showPopup = function () {\n        if (popup.is(':visible')) {\n            return;\n        }\n        showTimer = setTimeout(function () {\n            if (!contentLoaded || !shouldShow) {\n                return;\n            }\n            opts.addActiveClass && $(items).addClass('active');\n            beingShown = true;\n            if (!opts.persistent) {\n                bindHideEvents();\n            }\n            InlineDialog.current = getHash();\n            $(document).trigger('showLayer', ['inlineDialog', getHash()]);\n            // retrieve the position of the click target. The offsets might be different for different types of targets and therefore\n            // either have to be customisable or we will have to be smarter about calculating the padding and elements around it\n\n            getHash().reset();\n\n        }, opts.showDelay);\n    };\n\n    var hidePopup = function (delay) {\n        // do not auto hide the popup if persistent is set as true\n        if (typeof delay === 'undefined' && opts.persistent) {\n            return;\n        }\n        if (typeof popup.get(0)._datePickerPopup !== 'undefined') {\n            // AUI-2696 - This inline dialog is host to a date picker... so we shouldn't close it.\n            return;\n        }\n\n        shouldShow = false;\n        // only exectute the below if the popup is currently being shown\n        // and the arbitrator callback gives us the green light\n        if (beingShown && opts.preHideCallback.call(popup[0].popup)) {\n            delay = (delay == null) ? opts.hideDelay : delay;\n            clearTimeout(hideDelayTimer);\n            clearTimeout(showTimer);\n            // store the timer so that it can be cleared in the mouseenter if required\n            //disable auto-hide if user passes null for hideDelay\n            if (delay != null) {\n                hideDelayTimer = setTimeout(function () {\n                    unbindHideEvents();\n                    opts.addActiveClass && $(items).removeClass('active');\n                    popup.fadeOut(opts.fadeTime, function () {\n                        opts.hideCallback.call(popup[0].popup);\n                    });\n                    beingShown = false;\n                    shouldShow = false;\n                    $(document).trigger('hideLayer', ['inlineDialog', getHash()]);\n                    InlineDialog.current = null;\n                    if (!opts.cacheContent) {\n                        //if not caching the content, then reset the\n                        //flags to false so as to reload the content\n                        //on next mouse hover.\n                        contentLoaded = false;\n                        contentLoading = false;\n                    }\n\n                }, delay);\n            }\n\n        }\n    };\n\n    // the trigger is the jquery element that is triggering the popup (i.e., the element that the mousemove event is bound to)\n    var initPopup = function (e, trigger) {\n        var $trigger = $(trigger);\n\n        opts.upfrontCallback.call({\n            popup: popup,\n            hide: function () {\n                hidePopup(0);\n            },\n            id: identifier,\n            show: function () {\n                showPopup();\n            }\n        });\n\n        popup.each(function () {\n            if (typeof this.popup !== 'undefined') {\n                this.popup.hide();\n            }\n        });\n\n        //Close all other popups if neccessary\n        if (opts.closeOthers) {\n            $('.aui-inline-dialog').each(function () {\n                !this.popup.persistent && this.popup.hide();\n            });\n        }\n\n        //handle programmatic showing where there is no event\n        targetPosition = {target: $trigger};\n        if (!e) {\n            mousePosition = {x: $trigger.offset().left, y: $trigger.offset().top};\n        } else {\n            mousePosition = {x: e.pageX, y: e.pageY};\n        }\n\n\n\n        if (!beingShown) {\n            clearTimeout(showTimer);\n        }\n        shouldShow = true;\n        var doShowPopup = function () {\n            contentLoading = false;\n            contentLoaded = true;\n            opts.initCallback.call({\n                popup: popup,\n                hide: function () {\n                    hidePopup(0);\n                },\n                id: identifier,\n                show: function () {\n                    showPopup();\n                }\n            });\n            showPopup();\n        };\n        // lazy load popup contents\n        if (!contentLoading) {\n            contentLoading = true;\n            if ($.isFunction(url)) {\n                // If the passed in URL is a function, execute it. Otherwise simply load the content.\n                url(contents, trigger, doShowPopup);\n            } else {\n                //Retrive response from server\n                $.get(url, function (data, status, xhr) {\n                    //Load HTML contents into the popup\n                    contents.html(opts.responseHandler(data, status, xhr));\n                    //Show the popup\n                    contentLoaded = true;\n                    opts.initCallback.call({\n                        popup: popup,\n                        hide: function () {\n                            hidePopup(0);\n                        },\n                        id: identifier,\n                        show: function () {\n                            showPopup();\n                        }\n                    });\n                    showPopup();\n                });\n            }\n        }\n        // stops the hide event if we move from the trigger to the popup element\n        clearTimeout(hideDelayTimer);\n        // don't trigger the animation again if we're being shown\n        if (!beingShown) {\n            showPopup();\n        }\n        return false;\n    };\n\n    popup[0].popup = getHash();\n\n    var contentLoading = false;\n    var added  = false;\n    var appendPopup = function () {\n        if (!added) {\n            $(opts.container).append(popup);\n            added = true;\n        }\n    };\n    var $items = $(items);\n\n    if (opts.onHover) {\n        if (opts.useLiveEvents) {\n            // We're using .on() to emulate the behaviour of .live() here. on() requires the jQuery object to have\n            // a selector - this is actually how .live() is implemented in jQuery 1.7+.\n            // Note that .selector is deleted in jQuery 1.9+.\n            // This means that jQuery objects created by selection eg $(\".my-class-selector\") will work, but\n            // object created by DOM parsing eg $(\"<div class='.my-class'></div>\") will not work.\n            // Ideally we should throw an error if the $items has no selector but that is backwards incompatible,\n            // so we warn and do a no-op - this emulates the behaviour of live() but has the added warning.\n            if ($items.selector) {\n                $(document).on('mouseenter', $items.selector, function (e) {\n                    appendPopup();\n                    initPopup(e, this);\n                }).on('mouseleave', $items.selector, function () {\n                    hidePopup();\n                });\n            } else {\n                logger.log('Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.');\n            }\n        } else {\n            $items.on({\n                mouseenter: function (e) {\n                    appendPopup();\n                    initPopup(e,this);\n                },\n                mouseleave: function () {\n                    hidePopup();\n                }\n            });\n        }\n    } else {\n        if (!opts.noBind) {   //Check if the noBind option is turned on\n            if (opts.useLiveEvents) {\n                // See above for why we filter by .selector\n                if ($items.selector) {\n                    $(document).on('click', $items.selector, function (e) {\n                        appendPopup();\n                        if (shouldCloseOnTriggerClick()) {\n                            popup.hide();\n                        } else {\n                            initPopup(e,this);\n                        }\n                        return false;\n                    }).on('mouseleave', $items.selector, function () {\n                        hidePopup();\n                    });\n                } else {\n                    logger.log('Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.');\n                }\n            } else {\n                $items.on('click', function (e) {\n                    appendPopup();\n                    if (shouldCloseOnTriggerClick()) {\n                        popup.hide();\n                    } else {\n                        initPopup(e,this);\n                    }\n                    return false;\n                }).on('mouseleave', function () {\n                    hidePopup();\n                });\n            }\n        }\n    }\n\n    var shouldCloseOnTriggerClick = function () {\n        return beingShown && opts.closeOnTriggerClick;\n    };\n\n    var bindHideEvents = function () {\n        bindHideOnExternalClick();\n        bindHideOnEscPressed();\n    };\n\n    var unbindHideEvents = function () {\n        unbindHideOnExternalClick();\n        unbindHideOnEscPressed();\n    };\n\n    // Be defensive and make sure that we haven't already bound the event\n    var hasBoundOnExternalClick = false;\n    var externalClickNamespace = identifier + '.inline-dialog-check';\n\n    /**\n     * Catch click events on the body to see if the click target occurs outside of this popup\n     * If it does, the popup will be hidden\n     */\n    var bindHideOnExternalClick = function () {\n        if (!hasBoundOnExternalClick) {\n            $('body').bind('click.' + externalClickNamespace, function (e) {\n                var $target = $(e.target);\n                // hide the popup if the target of the event is not in the dialog\n                if ($target.closest('#inline-dialog-' + escapedIdentifier + ' .contents').length === 0) {\n                    hidePopup(0);\n                }\n            });\n            hasBoundOnExternalClick = true;\n        }\n    };\n\n    var unbindHideOnExternalClick = function () {\n        if (hasBoundOnExternalClick) {\n            $('body').unbind('click.' + externalClickNamespace);\n        }\n        hasBoundOnExternalClick = false;\n    };\n\n    var onKeydown = function (e) {\n        if (e.keyCode === keyCode.ESCAPE) {\n            hidePopup(0);\n        }\n    };\n\n    var bindHideOnEscPressed = function () {\n        $(document).on('keydown', onKeydown);\n    };\n\n    var unbindHideOnEscPressed = function () {\n        $(document).off('keydown', onKeydown);\n    };\n\n    /**\n     * Show the inline dialog.\n     * @method show\n     */\n    popup.show = function (e, trigger) {\n        if (e) {\n            e.stopPropagation();\n        }\n        appendPopup();\n        if (opts.noBind && !(items && items.length)) {\n            initPopup(e, trigger === undefined ? e.target : trigger);\n        } else {\n            initPopup(e, items);\n        }\n    };\n    /**\n     * Hide the inline dialog.\n     * @method hide\n     */\n    popup.hide = function () {\n        hidePopup(0);\n    };\n    /**\n     * Repositions the inline dialog if being shown.\n     * @method refresh\n     */\n    popup.refresh = function () {\n        if (beingShown) {\n            getHash().reset();\n        }\n    };\n\n    popup.getOptions = function () {\n        return opts;\n    };\n\n    return popup;\n}\n\nfunction dimensionsOf(el) {\n    const $el = $(el);\n    el = $el.get(0); // in case someone passes in an el of $(window) or similar.\n    // Check if the element is a window object.\n    // jQuery does not handle window object dimensionality well, so we provide it manually.\n    if (el && el === el.window) {\n        return {\n            left: 0,\n            top: 0,\n            width: $el.width(),\n            height: $el.height(),\n        };\n    }\n    // Calculate for all other element types\n    const offset = $el.offset() || {};\n    return {\n        left: offset.left || 0,\n        top: offset.top || 0,\n        width: $el.outerWidth() || 0,\n        height: $el.outerHeight() || 0,\n    };\n}\n\nfunction getDimensions(popup, targetPosition, mousePosition, opts) {\n    var offsetX = $.isFunction(opts.offsetX) ? opts.offsetX(popup, targetPosition, mousePosition, opts) : opts.offsetX;\n    var offsetY = $.isFunction(opts.offsetY) ? opts.offsetY(popup, targetPosition, mousePosition, opts) : opts.offsetY;\n    var arrowOffsetX = $.isFunction(opts.arrowOffsetX) ? opts.arrowOffsetX(popup, targetPosition, mousePosition, opts) : opts.arrowOffsetX;\n    var arrowOffsetY = $.isFunction(opts.arrowOffsetY) ? opts.arrowOffsetY(popup, targetPosition, mousePosition, opts) : opts.arrowOffsetY;\n\n    // Support positioning inside a scroll container other than <body>\n    var isConstrainedScroll = opts.container.toLowerCase() !== 'body';\n    var $scrollContainer = $(opts.container);\n    var $scrollWindow = isConstrainedScroll ?\n        $(opts.container).parent() :\n        $(window);\n    var scrollContainerOffset = isConstrainedScroll ?\n        $scrollContainer.offset() : {left: 0, top: 0};\n    var scrollWindowOffset = isConstrainedScroll ?\n        $scrollWindow.offset() : {left: 0, top: 0};\n\n    var trigger = targetPosition.target;\n    var triggerOffset = trigger.offset();\n    // Support SVG elements as triggers\n    // TODO Should calculateNorthSouthPositions also try getBBox()?\n    var triggerBBox = trigger[0].getBBox && trigger[0].getBBox();\n\n    return {\n        // determines how close to the edge the dialog needs to be before it is considered offscreen\n        screenPadding: 10,\n        // Min distance arrow needs to be from the edge of the dialog\n        arrowMargin: 5,\n        window: {\n            top: scrollWindowOffset.top,\n            left: scrollWindowOffset.left,\n            scrollTop: $scrollWindow.scrollTop(),\n            scrollLeft: $scrollWindow.scrollLeft(),\n            width: $scrollWindow.width(),\n            height: $scrollWindow.height()\n        },\n        scrollContainer: {\n            width: $scrollContainer.width(),\n            height: $scrollContainer.height()\n        },\n        // Position of the trigger is relative to the scroll container\n        trigger: {\n            top: triggerOffset.top - scrollContainerOffset.top,\n            left: triggerOffset.left - scrollContainerOffset.left,\n            width: triggerBBox ? triggerBBox.width : trigger.outerWidth(),\n            height: triggerBBox ? triggerBBox.height : trigger.outerHeight()\n        },\n        dialog: {\n            width: popup.width(),\n            height: popup.height(),\n            offset: {\n                top: offsetY,\n                left: offsetX\n            }\n        },\n        arrow: {\n            height: popup.find('.arrow').outerHeight(),\n            offset: {\n                top: arrowOffsetY,\n                left: arrowOffsetX\n            }\n        }\n    };\n}\n\nfunction calculateWestPositions(popup, targetPosition, mousePosition, opts) {\n    var dimensions = getDimensions(popup, targetPosition, mousePosition, opts);\n    var screenPadding = dimensions.screenPadding;\n    var win = dimensions.window;\n    var trigger = dimensions.trigger;\n    var dialog = dimensions.dialog;\n    var arrow = dimensions.arrow;\n    var scrollContainer = dimensions.scrollContainer;\n\n    var triggerScrollOffset = {\n        top: trigger.top - win.scrollTop,\n        left: trigger.left - win.scrollLeft\n    };\n\n    // Halves - because the browser doesn't do sub-pixel positioning, we need to consistently floor\n    // all decimal values or you can get 1px jumps in arrow positioning when the dialog's height changes.\n    var halfTriggerHeight = Math.floor(trigger.height / 2);\n    var halfPopupHeight = Math.floor(dialog.height / 2);\n    var halfArrowHeight = Math.floor(arrow.height / 2);\n\n    // Figure out where to position the dialog, preferring the right (gravity: 'w').\n    var spaceOnLeft = triggerScrollOffset.left - dialog.offset.left - screenPadding;\n\n    // This implementation may not be suitable for horizontally scrolling containers\n    var spaceOnRight = scrollContainer.width - triggerScrollOffset.left - trigger.width - dialog.offset.left - screenPadding;\n\n    var enoughSpaceOnLeft = spaceOnLeft >= dialog.width;\n    var enoughSpaceOnRight = spaceOnRight >= dialog.width;\n    var gravity = !enoughSpaceOnRight && enoughSpaceOnLeft ? 'e' : 'w';\n\n    // Screen padding needs to be adjusted if the arrow would extend into it\n    var arrowScreenTop = triggerScrollOffset.top + halfTriggerHeight - halfArrowHeight;\n    var arrowScreenBottom = win.height - arrowScreenTop - arrow.height;\n    screenPadding = Math.min(screenPadding, arrowScreenTop - dimensions.arrowMargin);\n    screenPadding = Math.min(screenPadding, arrowScreenBottom - dimensions.arrowMargin);\n\n    // Figure out if the dialog needs to be adjusted up or down to fit on the screen\n    var middleOfTrigger = triggerScrollOffset.top + halfTriggerHeight;\n    var spaceAboveMiddleOfTrigger = Math.max(middleOfTrigger - screenPadding, 0);\n    var spaceBelowMiddleOfTrigger = Math.max(win.height - middleOfTrigger - screenPadding, 0);\n\n    var isOverflowingAbove = halfPopupHeight - dialog.offset.top > spaceAboveMiddleOfTrigger;\n    var isOverflowingBelow = halfPopupHeight + dialog.offset.top > spaceBelowMiddleOfTrigger;\n\n    var popupCss;\n    var arrowCss;\n    if (isOverflowingAbove) {\n        popupCss = {\n            top: win.scrollTop + screenPadding,\n            left: gravity === 'w' ?\n                trigger.left + trigger.width + dialog.offset.left :\n                trigger.left - dialog.width - dialog.offset.left\n        };\n        arrowCss = {\n            top: (trigger.top + halfTriggerHeight) - (popupCss.top + halfArrowHeight)\n        };\n    } else if (isOverflowingBelow) {\n        popupCss = {\n            top: win.scrollTop + win.height - dialog.height - screenPadding,\n            left: gravity === 'w' ?\n                trigger.left + trigger.width + dialog.offset.left :\n                trigger.left - dialog.width - dialog.offset.left\n        };\n        arrowCss = {\n            top: (trigger.top + halfTriggerHeight) - (popupCss.top + halfArrowHeight)\n        };\n    } else {\n        popupCss = {\n            top: trigger.top + halfTriggerHeight - halfPopupHeight + dialog.offset.top,\n            left: gravity === 'w' ?\n                trigger.left + trigger.width + dialog.offset.left :\n                trigger.left - dialog.width - dialog.offset.left\n        };\n        arrowCss = {\n            top: halfPopupHeight - halfArrowHeight + arrow.offset.top\n        };\n    }\n\n    return {\n        gravity: gravity,\n        popupCss: popupCss,\n        arrowCss: arrowCss\n    };\n}\n\nfunction calculateNorthSouthPositions(popup, targetPosition, mousePosition, opts) {\n    var offsetX = $.isFunction(opts.offsetX) ? opts.offsetX(popup, targetPosition, mousePosition, opts) : opts.offsetX;\n    var offsetY = $.isFunction(opts.offsetY) ? opts.offsetY(popup, targetPosition, mousePosition, opts) : opts.offsetY;\n    var arrowOffsetX = $.isFunction(opts.arrowOffsetX) ? opts.arrowOffsetX(popup, targetPosition, mousePosition, opts) : opts.arrowOffsetX;\n\n    var viewportDimensions = dimensionsOf(window);\n    var targetDimensions = dimensionsOf(targetPosition.target);\n    var popupDimensions = dimensionsOf(popup);\n    var arrowDimensions = dimensionsOf(popup.find('.aui-inline-dialog-arrow'));\n\n    var middleOfTrigger = targetDimensions.left + targetDimensions.width / 2; //The absolute x position of the middle of the Trigger\n    var bottomOfViewablePage = (window.pageYOffset || document.documentElement.scrollTop) + viewportDimensions.height;\n    var SCREEN_PADDING = 10; //determines how close to the edge the dialog needs to be before it is considered offscreen\n\n    // Set popup's position (within the viewport)\n    popupDimensions.top = targetDimensions.top + targetDimensions.height + ~~offsetY;\n    popupDimensions.left = targetDimensions.left + ~~offsetX;\n\n    // Calculate if the popup would render off the side of the viewport\n    var diff = viewportDimensions.width - (popupDimensions.left + popupDimensions.width + SCREEN_PADDING);\n\n    // Set arrow's position (within the popup)\n    arrowDimensions.left = middleOfTrigger - popupDimensions.left + ~~arrowOffsetX;\n    // TODO arrowDimensions.top should also use arrowOffsetY.\n    arrowDimensions.top = -(arrowDimensions.height / 2);\n\n    // Check whether the popup should display above or below the trigger\n    var enoughRoomAbove = targetDimensions.top > popupDimensions.height;\n    var enoughRoomBelow = (popupDimensions.top + popupDimensions.height) < bottomOfViewablePage;\n    var displayAbove = (!enoughRoomBelow && enoughRoomAbove) || (enoughRoomAbove && opts.gravity === 's');\n\n    if (displayAbove) {\n        popupDimensions.top = targetDimensions.top - popupDimensions.height - (arrowDimensions.height / 2);\n        arrowDimensions.top = popupDimensions.height;\n    }\n\n    // Check if the popup should show up relative to the mouse\n    if (opts.isRelativeToMouse){\n        if (diff < 0){\n            popupDimensions.right = SCREEN_PADDING;\n            popupDimensions.left = 'auto';\n            // TODO Why doesn't arrowDimentions.left here use arrowOffsetX?\n            arrowDimensions.left = mousePosition.x - (viewportDimensions.width - popupDimensions.width);\n        } else {\n            popupDimensions.left = mousePosition.x - 20;\n            // TODO Why doesn't arrowDimentions.left here use arrowOffsetX?\n            arrowDimensions.left = mousePosition.x - popupDimensions.left;\n        }\n    } else {\n        if (diff < 0){\n            popupDimensions.right = SCREEN_PADDING;\n            popupDimensions.left = 'auto';\n\n            var popupRightEdge = viewportDimensions.width - popupDimensions.right;\n            var popupLeftEdge = popupRightEdge - popupDimensions.width;\n\n            //arrow's position must be relative to the popup's position and not of the screen.\n            arrowDimensions.right = 'auto';\n            // TODO Why doesn't arrowDimentions.left here use arrowOffsetX?\n            arrowDimensions.left = middleOfTrigger - popupLeftEdge - arrowDimensions.width / 2;\n        } else if (popupDimensions.width <= targetDimensions.width / 2){\n            // TODO Why doesn't arrowDimentions.left here use arrowOffsetX?\n            arrowDimensions.left = popupDimensions.width / 2;\n            popupDimensions.left = middleOfTrigger - popupDimensions.width / 2;\n        }\n    }\n    return {\n        gravity: displayAbove ? 's' : 'n',\n        displayAbove: displayAbove,  // Replaced with gravity but remains for backward compatibility.\n        popupCss: {\n            left: popupDimensions.left,\n            top: popupDimensions.top,\n            right: popupDimensions.right\n        },\n        arrowCss: {\n            left: arrowDimensions.left,\n            top: arrowDimensions.top,\n            right: arrowDimensions.right\n        }\n    };\n}\n\n\nInlineDialog.opts = {\n    onTop: false,\n    responseHandler: function (data) {\n        //assume data is html\n        return data;\n    },\n    closeOthers: true,\n    isRelativeToMouse: false,\n    addActiveClass: true, // if false, signifies that the triggers should not have the \"active\" class applied\n    onHover: false,\n    useLiveEvents: false,\n    noBind: false,\n    fadeTime: 100,\n    persistent: false,\n    hideDelay: 10000,\n    showDelay: 0,\n    width: 300,\n    offsetX: 0,\n    offsetY: 10,\n    arrowOffsetX: 0,\n    arrowOffsetY: 0,\n    container: 'body',\n    cacheContent: true,\n    displayShadow: true,\n    autoWidth: false,\n    gravity: 'n',\n    closeOnTriggerClick: false,\n    preHideCallback: function () {\n        return true;\n    },\n    hideCallback: function () {}, // if defined, this method will be exected after the popup has been faded out.\n    initCallback: function () {}, // A function called after the popup contents are loaded. `this` will be the popup jQuery object, and the first argument is the popup identifier.\n    upfrontCallback: function () {}, // A function called before the popup contents are loaded. `this` will be the popup jQuery object, and the first argument is the popup identifier.\n    /**\n     * Returns an object with the following attributes:\n     *      popupCss css attributes to apply on the popup element\n     *      arrowCss css attributes to apply on the arrow element\n     *\n     * @param popup\n     * @param targetPosition position of the target element\n     * @param mousePosition current mouse position\n     * @param opts options\n     */\n    calculatePositions: function (popup, targetPosition, mousePosition, opts) {\n        opts = opts || {};\n        var algorithm = opts.gravity === 'w' ? calculateWestPositions : calculateNorthSouthPositions;\n        return algorithm(popup, targetPosition, mousePosition, opts)\n    }\n};\n\n\n// Deprecations\n// ------------\n\nInlineDialog = deprecate.construct(InlineDialog, 'Inline dialog constructor', {\n    alternativeName: 'inline dialog 2'\n});\n\nvar displayAboveDeprecationLogger = deprecate.getMessageLogger('displayAbove', '[remove version]', {\n    alternativeName: 'gravity',\n    extraInfo: 'See https://ecosystem.atlassian.net/browse/AUI-2197.'\n});\n\nvar onTopDeprecationLogger = deprecate.getMessageLogger('onTop', '[remove version]', {\n    alternativeName: 'gravity',\n    extraInfo: 'See https://ecosystem.atlassian.net/browse/AUI-2197.'\n});\n\n\n// Exporting\n// ---------\n\nglobalize('InlineDialog', InlineDialog);\n\nexport default InlineDialog;\n"],"sourceRoot":""}