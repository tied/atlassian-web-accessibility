{"version":3,"sources":["webpack:///./aui.component.dialog2.js","webpack:///../src/js/aui/dialog2.js"],"names":["default","__webpack_require__","defaults","aui-focus","aui-blanketed","template","Dialog2","selector","this","$el","_jquery2","$","each","key","value","dataKey","hasAttribute","attr","applyDefaults","prototype","on","event","fn","_layer2","off","show","hide","remove","isVisible","dialog2Widget","_widget2","eventName","layerWidget","document","e","type","keyCode","ENTER","SPACE","preventDefault","target","closest","find","$selected","some","length","first","focus","layer","data","_amdify2","_globalize2"],"mappings":"6TAESA,WAFTC,EAAA,QACAA,EAAA,mHCDA,QAAAA,EAAA,aACAA,EAAA,aACAA,EAAA,aACAA,EAAA,aACAA,EAAA,aACAA,EAAA,4DAEA,IAAIC,GACAC,YAAa,QACbC,gBAAiB,QAYrB,IAAMC,8hBAYN,SAASC,EAAQC,GAETC,KAAKC,IADLF,GACW,EAAAG,EAAAV,SAAEO,IAEF,EAAAG,EAAAV,SAAEK,GAzBrB,SAAuBI,GACnBE,UAAEC,KAAKV,EAAU,SAAUW,EAAKC,GAC5B,IAAIC,EAAU,QAAUF,EACnBJ,EAAI,GAAGO,aAAaD,IACrBN,EAAIQ,KAAKF,EAASD,KAuB1BI,CAAcV,KAAKC,KAGvBH,EAAQa,UAAUC,GAAK,SAAUC,EAAOC,GAEpC,OADA,EAAAC,EAAAvB,SAAYQ,KAAKC,KAAKW,GAAGC,EAAOC,GACzBd,MAGXF,EAAQa,UAAUK,IAAM,SAAUH,EAAOC,GAErC,OADA,EAAAC,EAAAvB,SAAYQ,KAAKC,KAAKe,IAAIH,EAAOC,GAC1Bd,MAGXF,EAAQa,UAAUM,KAAO,WAErB,OADA,EAAAF,EAAAvB,SAAYQ,KAAKC,KAAKgB,OACfjB,MAGXF,EAAQa,UAAUO,KAAO,WAErB,OADA,EAAAH,EAAAvB,SAAYQ,KAAKC,KAAKiB,OACflB,MAGXF,EAAQa,UAAUQ,OAAS,WAEvB,OADA,EAAAJ,EAAAvB,SAAYQ,KAAKC,KAAKkB,SACfnB,MAGXF,EAAQa,UAAUS,UAAY,WAC1B,OAAO,EAAAL,EAAAvB,SAAYQ,KAAKC,KAAKmB,aAGjC,IAAIC,GAAgB,EAAAC,EAAA9B,SAAO,UAAWM,GAEtCuB,EAAcT,GAAK,SAAUW,EAAWT,GAEpC,OADAU,UAAYZ,GAAGW,EAAW,eAAgBT,GACnCd,MAGXqB,EAAcL,IAAM,SAAUO,EAAWT,GAErC,OADAU,UAAYR,IAAIO,EAAW,eAAgBT,GACpCd,OAKX,EAAAE,EAAAV,SAAEiC,UAAUb,GAAG,gBAAiB,4BAA6B,SAASc,IAClC,UAAXA,EAAEC,MAAoBD,EAAEE,UAAYA,UAAQC,OAASH,EAAEE,UAAYA,UAAQE,SAE5FJ,EAAEK,iBACFV,GAAc,EAAAnB,EAAAV,SAAEkC,EAAEM,QAAQC,QAAQ,iBAAiBf,UAI3DG,EAAcT,GAAG,OAAQ,SAAUc,EAAGzB,GAElCA,EAAIiC,KAAK,6BAA6BzB,KAAK,WAAY,GAGvD,IACI0B,GADa,uBAAwB,sBAAuB,uBAEtDC,KAAK,SAAUrC,GAErB,OADAoC,EAAYlC,EAAIiC,KAAKnC,GAAUmC,KAAK,kBACnBG,SAErBF,GAAaA,EAAUG,QAAQC,UAGnClB,EAAcT,GAAG,OAAQ,SAAUc,EAAEzB,GACjC,IAAIuC,GAAQ,EAAAzB,EAAAvB,SAAYS,GAEpBA,EAAIwC,KAAK,uBACTD,EAAMrB,YAId,EAAAuB,EAAAlD,SAAO,cAAe6B,IACtB,EAAAsB,EAAAnD,SAAU,UAAW6B,aACNA","file":"aui.chunk.8dfc581e537092369347--79cee1339050bf73f760.js","sourcesContent":["import './aui.component.layer';\nimport '@atlassian/aui/src/less/dialog2.less';\nexport { default as dialog2 } from '@atlassian/aui/src/js/aui/dialog2';\n","import $ from './jquery';\nimport amdify from './internal/amdify';\nimport globalize from './internal/globalize';\nimport layerWidget from './layer';\nimport widget from './internal/widget';\nimport keyCode from './key-code';\n\nvar defaults = {\n    'aui-focus': 'false', // do not focus by default as it's overridden below\n    'aui-blanketed': 'true'\n};\n\nfunction applyDefaults($el) {\n    $.each(defaults, function (key, value) {\n        var dataKey = 'data-' + key;\n        if (!$el[0].hasAttribute(dataKey)) {\n            $el.attr(dataKey, value);\n        }\n    });\n}\n\nconst template = `\n        <section role=\"dialog\" class=\"aui-layer aui-dialog2 aui-dialog2-medium\" aria-hidden=\"true\">\n            <header class=\"aui-dialog2-header\">\n                <h2 class=\"aui-dialog2-header-main\"></h2>\n                <a class=\"aui-dialog2-header-close\">\n                    <span class=\"aui-icon aui-icon-small aui-iconfont-close-dialog\">Close</span>\n                </a>\n            </header>\n            <div class=\"aui-dialog2-content\"></div>\n            <footer class=\"aui-dialog2-footer\"></footer>\n        </section>`;\n\nfunction Dialog2(selector) {\n    if (selector) {\n        this.$el = $(selector);\n    } else {\n        this.$el = $(template);\n    }\n    applyDefaults(this.$el);\n}\n\nDialog2.prototype.on = function (event, fn) {\n    layerWidget(this.$el).on(event, fn);\n    return this;\n};\n\nDialog2.prototype.off = function (event, fn) {\n    layerWidget(this.$el).off(event, fn);\n    return this;\n};\n\nDialog2.prototype.show = function () {\n    layerWidget(this.$el).show();\n    return this;\n};\n\nDialog2.prototype.hide = function () {\n    layerWidget(this.$el).hide();\n    return this;\n};\n\nDialog2.prototype.remove = function () {\n    layerWidget(this.$el).remove();\n    return this;\n};\n\nDialog2.prototype.isVisible = function () {\n    return layerWidget(this.$el).isVisible();\n};\n\nvar dialog2Widget = widget('dialog2', Dialog2);\n\ndialog2Widget.on = function (eventName, fn) {\n    layerWidget.on(eventName, '.aui-dialog2', fn);\n    return this;\n};\n\ndialog2Widget.off = function (eventName, fn) {\n    layerWidget.off(eventName, '.aui-dialog2', fn);\n    return this;\n};\n\n/* Live events */\n\n$(document).on('click keydown', '.aui-dialog2-header-close', function(e) {\n    const shouldHandle = e.type === 'click' || e.keyCode === keyCode.ENTER || e.keyCode === keyCode.SPACE;\n    if (shouldHandle) {\n        e.preventDefault();\n        dialog2Widget($(e.target).closest('.aui-dialog2')).hide();\n    }\n});\n\ndialog2Widget.on('show', function (e, $el) {\n    // prevent inability to focus the close button.\n    $el.find('.aui-dialog2-header-close').attr('tabindex', 0);\n\n    // find appropriate content to focus, in order of importance of the content.\n    var selectors = ['.aui-dialog2-content', '.aui-dialog2-footer', '.aui-dialog2-header'];\n    var $selected;\n    selectors.some(function (selector) {\n        $selected = $el.find(selector).find(':aui-tabbable');\n        return $selected.length;\n    });\n    $selected && $selected.first().focus();\n});\n\ndialog2Widget.on('hide', function (e,$el) {\n    var layer = layerWidget($el);\n\n    if ($el.data('aui-remove-on-hide')) {\n        layer.remove();\n    }\n});\n\namdify('aui/dialog2', dialog2Widget);\nglobalize('dialog2', dialog2Widget);\nexport default dialog2Widget;\n"],"sourceRoot":""}