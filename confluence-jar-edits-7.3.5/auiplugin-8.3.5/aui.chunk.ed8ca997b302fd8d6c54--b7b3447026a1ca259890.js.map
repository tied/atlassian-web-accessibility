{"version":3,"sources":["webpack:///../src/js/aui/blanket.js"],"names":["overflowEl","__webpack_require__","_deprecation","_animation","_hiddenByAui","dim","useShim","zIndex","Array","prototype","forEach","call","document","body","children","element","hasAttribute","hasAriaHidden","classList","contains","isAuiLayer","setAttribute","push","useShimDeprecationLogger","isBlanketShowing","$dim","attr","remove","_jquery2","default","addClass","appendTo","recomputeStyle","cachedOverflow","overflow","style","overflowX","overflowY","css","undim","removeAttribute","getMessageLogger","extraInfo","_globalize2"],"mappings":"uLAAA,IAKIA,MALJC,EAAA,SACAC,EAAAD,EAAA,QACAE,EAAAF,EAAA,YACAA,EAAA,4DAGA,IAAIG,KAMJ,SAASC,EAAKC,EAASC,GAWnBC,MAAMC,UAAUC,QAAQC,KAAKC,SAASC,KAAKC,SAAU,SAAUC,IAR/D,SAAuBA,GACnB,OAAOA,EAAQC,aAAa,gBAQvBC,CAAcF,IALvB,SAAoBA,GAChB,OAAOA,EAAQG,UAAUC,SAAS,aAIFC,CAAWL,KACvCA,EAAQM,aAAa,cAAe,QACpCjB,EAAakB,KAAKP,MAIrBf,IACDA,EAAaY,SAASC,OAGV,IAAZP,GACAiB,IAGJ,IAAIC,IAAsBnB,EAAIoB,MAA0C,UAAjCpB,EAAIoB,KAAKC,KAAK,eAiCrD,OA/BMrB,EAAIoB,OACNpB,EAAIoB,KAAKE,SACTtB,EAAIoB,KAAO,MAGfpB,EAAIoB,MAAO,EAAAG,EAAAC,SAAE,eAAeC,SAAS,eACrCzB,EAAIoB,KAAKC,KAAK,WAAY,KAC1BrB,EAAIoB,KAAKM,SAASnB,SAASC,MAEtBW,KAGD,EAAArB,EAAA6B,gBAAe3B,EAAIoB,MAEnBpB,EAAI4B,gBACAC,SAAUlC,EAAWmC,MAAMD,SAC3BE,UAAWpC,EAAWmC,MAAMC,UAC5BC,UAAWrC,EAAWmC,MAAME,WAGhCrC,EAAWmC,MAAMC,UAAY,SAC7BpC,EAAWmC,MAAME,UAAY,SAC7BrC,EAAWmC,MAAMD,SAAW,UAGhC7B,EAAIoB,KAAKC,KAAK,cAAe,SAEzBnB,GACAF,EAAIoB,KAAKa,KAAK/B,OAAQA,IAGnBF,EAAIoB,KAOf,SAASc,IACLnC,EAAaM,QAAQ,SAAUK,GAC3BA,EAAQyB,gBAAgB,iBAG5BpC,KAEIC,EAAIoB,OACJpB,EAAIoB,KAAKC,KAAK,cAAe,QAEzB1B,IACAA,EAAWmC,MAAMD,SAAW7B,EAAI4B,eAAeC,SAC/ClC,EAAWmC,MAAMC,UAAY/B,EAAI4B,eAAeG,UAChDpC,EAAWmC,MAAME,UAAYhC,EAAI4B,eAAeI,YAK5D,IAAId,GAA2B,EAAArB,EAAAuC,kBAAiB,WAC5CC,UAAW,kEAGf,EAAAC,EAAAd,SAAU,MAAOxB,IACjB,EAAAsC,EAAAd,SAAU,QAASU,KAGflC,QACAkC","file":"aui.chunk.ed8ca997b302fd8d6c54--b7b3447026a1ca259890.js","sourcesContent":["import $ from './jquery';\nimport { getMessageLogger } from './internal/deprecation';\nimport { recomputeStyle } from './internal/animation';\nimport globalize from './internal/globalize';\n\nvar overflowEl;\nvar _hiddenByAui = [];\n\n/**\n * Dims the screen using a blanket div\n * @param useShim deprecated, it is calculated by dim() now\n */\nfunction dim (useShim, zIndex) {\n\n    //if we're blanketing the page it means we want to hide the whatever is under the blanket from the screen readers as well\n    function hasAriaHidden(element) {\n        return element.hasAttribute('aria-hidden');\n    }\n\n    function isAuiLayer(element) {\n        return element.classList.contains('aui-layer');\n    }\n\n    Array.prototype.forEach.call(document.body.children, function (element) {\n        if (!hasAriaHidden(element) && !isAuiLayer(element)) {\n            element.setAttribute('aria-hidden', 'true');\n            _hiddenByAui.push(element);\n        }\n    });\n\n    if (!overflowEl) {\n        overflowEl = document.body;\n    }\n\n    if (useShim === true) {\n        useShimDeprecationLogger();\n    }\n\n    var isBlanketShowing = (!!dim.$dim) && dim.$dim.attr('aria-hidden') === 'false';\n\n    if (!!dim.$dim) {\n        dim.$dim.remove();\n        dim.$dim = null;\n    }\n\n    dim.$dim = $('<div></div>').addClass('aui-blanket');\n    dim.$dim.attr('tabindex', '0'); //required, or the last element's focusout event will go to the browser\n    dim.$dim.appendTo(document.body);\n\n    if (!isBlanketShowing) {\n        //recompute after insertion and before setting aria-hidden=false to ensure we calculate a difference in\n        //computed styles\n        recomputeStyle(dim.$dim);\n\n        dim.cachedOverflow = {\n            overflow: overflowEl.style.overflow,\n            overflowX: overflowEl.style.overflowX,\n            overflowY: overflowEl.style.overflowY\n        };\n\n        overflowEl.style.overflowX = 'hidden';\n        overflowEl.style.overflowY = 'hidden';\n        overflowEl.style.overflow = 'hidden';\n    }\n\n    dim.$dim.attr('aria-hidden', 'false');\n\n    if (zIndex) {\n        dim.$dim.css({zIndex: zIndex});\n    }\n\n    return dim.$dim;\n}\n\n/**\n * Removes semitransparent DIV\n * @see dim\n */\nfunction undim () {\n    _hiddenByAui.forEach(function (element) {\n        element.removeAttribute('aria-hidden');\n    });\n\n    _hiddenByAui = [];\n\n    if (dim.$dim) {\n        dim.$dim.attr('aria-hidden', 'true');\n\n        if (overflowEl) {\n            overflowEl.style.overflow = dim.cachedOverflow.overflow;\n            overflowEl.style.overflowX = dim.cachedOverflow.overflowX;\n            overflowEl.style.overflowY = dim.cachedOverflow.overflowY;\n        }\n    }\n}\n\nvar useShimDeprecationLogger = getMessageLogger('useShim', {\n    extraInfo: 'useShim has no alternative as it is now calculated by dim().'\n});\n\nglobalize('dim', dim);\nglobalize('undim', undim);\n\nexport {\n    dim,\n    undim\n};\n"],"sourceRoot":""}