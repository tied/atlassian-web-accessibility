define("confluence-keyboard-shortcuts/shortcut-dialog","ajs confluence-keyboard-shortcuts/confluence-keyboard-shortcuts confluence/legacy confluence/templates jquery window".split(" "),function(a,f,e,m,d,r){return function(){var b;f.keyboardShortcuts.getDialog=function(){function o(){if(e&&e.Editor&&e.Editor.isVisible&&e.Editor.isVisible()){b.overrideLastTab();b.gotoPanel(1)}else b.gotoPanel(0)}var n=d.Deferred();if(b){o();return n.resolve(b)}var g=f.keyboardShortcuts.shortcuts,s=r.navigator.platform.indexOf("Mac")!==
-1,u=function(j){for(var c=d("<span></span>").addClass("item-action"),b=0;b<j.keys.length;b++){b>0&&c.append(k(a.I18n.getText("keyboard.shortcut.or")));for(var f=j.keys[b],l=0;l<f.length;l++){l>0&&c.append(k(a.I18n.getText("keyboard.shortcut.then")));for(var p=c,q=f[l].split("+"),i=0;i<q.length;i++){i>0&&p.append(k("+"));for(var e=p,g=q[i].split(".."),h=0;h<g.length;h++){h>0&&e.append(k(a.I18n.getText("keyboard.shortcut.to")));e.append(t(g[h]))}}}}return c},t=function(j){var c=d("<kbd></kbd>");switch(j){case "Shift":case "Sh":c.text(a.I18n.getText("keyboard.shortcut.shift"));
c.addClass("modifier-key");break;case "Ctrl":j=s?"âŒ˜":a.I18n.getText("keyboard.shortcut.ctrl");c.text(j);c.addClass("modifier-key");break;case "Tab":c.text(a.I18n.getText("keyboard.shortcut.tab"));c.addClass("modifier-key");break;case "Alt":c.text(a.I18n.getText("keyboard.shortcut.alt"));c.addClass("modifier-key");break;default:c.text(j);c.addClass("regular-key")}return c},k=function(a){var c=d("<span></span>");c.text(a);c.addClass("key-separator");return c},h=function(a,c,b){for(var a=d(m.KeyboardShortcutsDialog.keyboardShortcutModule({title:a})),
h=a.find("ul"),f=0;f<b.length;f++){var e=b[f];if(!e.hidden&&d.inArray(e.context,c)!==-1){var g=d("<li></li>").addClass("item-details"),i=e.description,i=d("<span></span>").addClass("item-description").append(i);g.append(i);g.append(u(e));h.append(g)}}return a};b=a.ConfluenceDialog({width:950,height:660,id:"keyboard-shortcuts-dialog"});b.addHeader(a.I18n.getText("keyboard.shortcuts.dialog.heading"));b.addPanel(a.I18n.getText("keyboard.shortcuts.dialog.panel.general"),function(){var b=d(m.KeyboardShortcutsDialog.keyboardShortcutPanel({panelId:"general-shortcuts-panel"})),
c=d(b).children(".shortcutsmenu");a.Meta.get("remote-user")&&b.find(".keyboard-shortcut-dialog-panel-header").append(e.Templates.KeyboardShortcutsDialog.keyboardShortcutEnabledCheckbox());c.append(h(a.I18n.getText("keyboard.shortcuts.dialog.module.global"),["global"],g));c.append(h(a.I18n.getText("keyboard.shortcuts.dialog.module.page"),["viewcontent","viewinfo"],g));return b}());b.addPanel(a.I18n.getText("keyboard.shortcuts.dialog.panel.editor"),function(){var b=d(m.KeyboardShortcutsDialog.keyboardShortcutPanel({panelId:"editor-shortcuts-panel"})),
c=d(b).children(".shortcutsmenu");c.append(h(a.I18n.getText("keyboard.shortcuts.dialog.module.block"),["tinymce.block"],g));c.append(h(a.I18n.getText("keyboard.shortcuts.dialog.module.rich"),["tinymce.rich"],g));c.append(h(a.I18n.getText("keyboard.shortcuts.dialog.module.editing-actions"),["tinymce.actions"],g));return b}());b.addCancel(a.I18n.getText("close.name"),function(){a.debug("Hiding Shortcuts help");b.hide();return false});a.trigger("keyboard-shortcut-dialog-ready",b);o();n.resolve(b);d("#keyboard-shortcut-enabled-checkbox").prop("checked",
f.keyboardShortcuts.enabled).click(function(){var b=d(this).prop("checked");d.ajax({type:"POST",url:a.contextPath()+"/rest/confluenceshortcuts/latest/enabled",data:d.toJSON({enabled:b}),dataType:"json",contentType:"application/json"}).done(function(){f.keyboardShortcuts.enabled=b;f.keyboardShortcuts.ready=false;b?a.trigger("add-bindings.keyboardshortcuts"):a.trigger("remove-bindings.keyboardshortcuts")})});return n}}});
require("confluence/module-exporter").safeRequire("confluence-keyboard-shortcuts/shortcut-dialog",function(a){require("ajs").toInit(a)});