define("confluence-collaborative-editor-plugin/btf/dialog/restart-synchrony-dialog",["ajs","confluence/legacy","confluence-collaborative-editor-plugin/btf/action/restart-synchrony-action","confluence-collaborative-editor-plugin/btf/event/event","confluence-collaborative-editor-plugin/btf/service/task-service"],function(l,n,k,o,h){var g="#restart-synchrony-dialog";var f="#dialog-submit-button";var j="#dialog-close-button";var m=10000;function e(){l.$(g).remove();l.$("body").append(n.Templates.CollaborativeEditor.Admin.BTF.Config.restartSynchronyDialog());l.dialog2(g).show();b()}function b(){var r=l.$(g);var q=r.find(f);var s=r.find(j);s.click(function(){l.dialog2(g).remove()});q.click(a)}function a(){i();p();var q;k().done(function(s){var r=s.taskId;h.processTask(r,undefined,function(){clearTimeout(q);l.dialog2(g).remove();l.trigger(o.SYNCHRONY_RESTARTED_EVENT)})});q=setTimeout(function(){l.dialog2(g).remove();l.trigger(o.SYNCHRONY_RESTARTED_EVENT)},m)}function p(){var r=l.$(g);var q=r.find(f);var s=r.find(j);q.prop("disabled",true);s.prop("disabled",true)}function c(){var r=l.$(g);var q=r.find(f);var s=r.find(j);q.prop("disabled",false);s.prop("disabled",false)}function i(){l.$(g).find(".button-spinner").spin()}function d(){l.$(g).find(".button-spinner").spinStop()}return{popDialog:e}});