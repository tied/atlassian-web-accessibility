@import "global.less";

@container-width: 256px;
@container-border-width: 2px;
@slider-icon-width: 20px;
@slider-width: @container-width - (2 * (@slider-icon-width + 5px)); // take off the width of the icon and the margins
@mask-size: 200px;

.image-explorer-container {
    width: @container-width + (2 * @container-border-width);

    &.empty {
        .image-explorer-image-view {
            border: @container-border-width dashed #ccc;
            background: none;
            margin: 0;

            &[data-upload-prompt]:after{
                .border-radius(3px);
                .box-sizing();
                content: attr(data-upload-prompt);
                color: #aaa;
                text-align: center;
                font-size: 17px;
                width: 100%;
                height: 100%;
                margin-left: -50%;
                padding: 48px 20px 0;
                position: absolute;
                top: 33%;
                left: 50%;
                background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE1MnB4IiBoZWlnaHQ9IjEyOHB4IiB2aWV3Qm94PSIwIDAgMTUyIDEyOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMC40ICg4MDU0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5kcmFnIGFuZCBkcm9wIGltYWdlIGljb248L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iSWNvbi1vbmx5IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBza2V0Y2g6dHlwZT0iTVNQYWdlIj4KICAgICAgICA8ZyBpZD0iZHJhZy1hbmQtZHJvcC1pbWFnZS1pY29uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIiBmaWxsPSIjRjc5MjMyIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTIiIHNrZXRjaDp0eXBlPSJNU0xheWVyR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwLjAwMDAwMCwgMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik04OS41MDY4Nzk4LDExMiBMNi4wMDE3OTM5NSwxMTIgQzIuNjg1NTA3NzYsMTEyIDAsMTA5LjMxMjkwNSAwLDEwNS45OTgyMDYgTDAsNi4wMDE3OTM5NSBDMCwyLjY4NTUwNzc2IDIuNjg3MDk0NjgsMCA2LjAwMTc5Mzk1LDAgTDEwNS45OTgyMDYsMCBDMTA5LjMxNDQ5MiwwIDExMiwyLjY4NzA5NDY4IDExMiw2LjAwMTc5Mzk1IEwxMTIsODYuNjcwNzAyMiBMMTA3LDg0LjU3MDk5ODIgTDEwNyw2LjAwMTc5Mzk1IEMxMDcsNS40NDc3NjU4MyAxMDYuNTUyMzE2LDUgMTA1Ljk5ODIwNiw1IEw2LjAwMTc5Mzk1LDUgQzUuNDQ3NzY1ODMsNSA1LDUuNDQ3Njg0MDUgNSw2LjAwMTc5Mzk1IEw1LDEwNS45OTgyMDYgQzUsMTA2LjU1MjIzNCA1LjQ0NzY4NDA1LDEwNyA2LjAwMTc5Mzk1LDEwNyBMODcuNDA3ODIxNywxMDcgTDg5LjUwNjg3OTgsMTEyIFoiIGlkPSJSZWN0YW5nbGUtMTkiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMTAuNzkyMTI2LDEwMy41OTE3NjggTDEyNi43MzMwMjYsOTkuMzY1MjgxOSBMODMsODEgTDEwMS4zNjA4NjksMTI0LjczNTk2OSBMMTA1LjU5MDI5NywxMDguNzkyMTI2IEwxMjIuMzg1OTM3LDEyNS41ODY0MSBDMTIzLjE2NjcwNSwxMjYuMzY3MTE0IDEyNC40MzczMDgsMTI2LjM2MjMzNCAxMjUuMjIwNjYzLDEyNS41Nzg5NzkgTDEyNy41Nzg5NzksMTIzLjIyMDY2MyBDMTI4LjM2Mzc4NywxMjIuNDM1ODU0IDEyOC4zNzMyNDQsMTIxLjE3Mjg4NiAxMjcuNTg2NDEsMTIwLjM4NjA1MSBMMTEwLjc5MjEyNiwxMDMuNTkxNzY4IFoiIGlkPSJGaWxsLTIiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zMC4wNDk5OTkyLDY2LjYxNjM5NDEgTDMwLjUxNDQ2NTMsNjYuNjE2Mzk0MSBMNDEuNTI5MTU4Myw3OC42MzEwODcxIEM0Mi41MDU0NjksNzkuNjA3Mzk3OCA0NC4wODgzODE0LDc5LjYwNzM5NzggNDUuMDY0NjkyMiw3OC42MzEwODcxIEM0Ni4yMTUwMDk2LDc3LjQ4MDc2OTcgNDYuMjE1MDA5Niw3Ny40ODA3Njk3IDQ5LjY2NTk2Miw3NC4wMjk4MTczIEM1MS4zOTE0MzgxLDcyLjMwNDM0MTEgNTEuMzkxNDM4MSw3Mi4zMDQzNDExIDUyLjgyOTMzNSw3MC44NjY0NDQzIEM1OC4xODc1ODA0LDY1LjUwODE5ODkgNTguMTg3NTgwNCw2NS41MDgxOTg5IDY0LjYxNzQ3NDksNTkuMDc4MzA0NCBDNzEuMDQ3MzY5NCw1Mi42NDg0MDk4IDcxLjA0NzM2OTQsNTIuNjQ4NDA5OCA3Ni40MDU2MTQ5LDQ3LjI5MDE2NDQgQzgwLjY5MjIxMTIsNDMuMDAzNTY4MSA3OC42OTIyMTEyLDQ1LjAwMzU2ODEgNzkuNzYzODYwMyw0My45MzE5MTkgTDgwLjIyODMyNjQsNDMuOTMxOTE5IEwxMDcuNzI5NjU3LDcxLjQzMzI0OTcgTDExMS4yNjUxOTEsNjcuODk3NzE1OCBMODEuNzYzODYwMywzOC4zOTYzODUxIEM4MC43ODc1NDk2LDM3LjQyMDA3NDMgNzkuMjA0NjM3MSwzNy40MjAwNzQzIDc4LjIyODMyNjQsMzguMzk2Mzg1MSBDNzcuMTU2Njc3MywzOS40NjgwMzQxIDc3LjE1NjY3NzMsMzkuNDY4MDM0MSA3Mi44NzAwODEsNDMuNzU0NjMwNSBDNjcuNTExODM1NSw0OS4xMTI4NzU5IDY3LjUxMTgzNTUsNDkuMTEyODc1OSA2MS4wODE5NDEsNTUuNTQyNzcwNSBDNTQuNjUyMDQ2NSw2MS45NzI2NjUgNTQuNjUyMDQ2NSw2MS45NzI2NjUgNDkuMjkzODAxLDY3LjMzMDkxMDQgQzQ3Ljg1NTkwNDIsNjguNzY4ODA3MiA0Ny44NTU5MDQyLDY4Ljc2ODgwNzIgNDYuMTMwNDI4MSw3MC40OTQyODM0IEM0Mi42Nzk0NzU3LDczLjk0NTIzNTggNDQuNjc5NDc1Nyw3MS45NDUyMzU4IDQzLjUyOTE1ODMsNzMuMDk1NTUzMiBMNDMuMDY0NjkyMiw3My4wOTU1NTMyIEwzMi4wNDk5OTkyLDYyLjA4MDg2MDIgQzMxLjA3MzY4ODQsNjEuMTA0NTQ5NSAyOS40OTA3NzYsNjEuMTA0NTQ5NSAyOC41MTQ0NjUzLDYyLjA4MDg2MDIgTDEuNDcxNDkwODYsODkuMTIzODM0NiBMNS4wMDcwMjQ3Nyw5Mi42NTkzNjg1IEwzMC4wNDk5OTkyLDY2LjYxNjM5NDEgWiIgaWQ9IlBhdGgtMjkiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik00OCwzMiBDNDgsMjQuODIwMjk4MyA0Mi4xNzk3MDE3LDE5IDM1LDE5IEMyNy44MjAyOTgzLDE5IDIyLDI0LjgyMDI5ODMgMjIsMzIgQzIyLDM5LjE3OTcwMTcgMjcuODIwMjk4Myw0NSAzNSw0NSBDNDIuMTc5NzAxNyw0NSA0OCwzOS4xNzk3MDE3IDQ4LDMyIFogTTI3LDMyIEMyNywyNy41ODE3MjIgMzAuNTgxNzIyLDI0IDM1LDI0IEMzOS40MTgyNzgsMjQgNDMsMjcuNTgxNzIyIDQzLDMyIEM0MywzNi40MTgyNzggMzkuNDE4Mjc4LDQwIDM1LDQwIEMzMC41ODE3MjIsNDAgMjcsMzYuNDE4Mjc4IDI3LDMyIFoiIGlkPSJPdmFsLTEiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+) no-repeat 50% 0;
                background-size: 150px;
                padding-top: 130px;
                margin-top: -33px;
            }

            .image-explorer-source {
                display: none;
            }

            .image-explorer-mask {
                display: none;
            }

            .image-explorer-drag-delegate {
                cursor: default;
            }
        }
        .image-explorer-scale-slider-wrapper {
            display: none;
        }
    }

    &.error {
        .image-explorer-image-view {
            &[data-upload-prompt]:after{
                display: none;
            }
        }
    }

    .image-explorer-image-view {
        .square(@container-width);
        position: relative;
        overflow: hidden;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAAAAACoWZBhAAAAFklEQVR4AWO4DwL/QYAkJpgE80lhAgAQXl1dNQp+KwAAAABJRU5ErkJggg==');
        border: 1px solid #ccc;
        margin: 1px;

        &.active-drop-target {
            border-color: #f79232;
        }

        .image-explorer-drag-delegate {
            .square(100%);
            position: absolute;
            cursor: move;
            background-color: rgba(0,0,0,0); //LOL WUT (IE)
        }

        .image-explorer-mask {
            .box-shadow(0 0 0 1000px rgba(0,0,0,0.5));
            .centered(@mask-size);

            &.circle-mask {
                .circle(@mask-size);
            }

            &.square-mask {
                .square(@mask-size);
            }

            &.rounded-square-mask {
                .square(@mask-size);
                .border-radius(5px);
            }
        }

        img {
            .centered();
        }

        .aui-message {
            @errorWidth: @container-width - 2 * 20px;
            .centered();
            .box-sizing();
            margin: 0;
            width: @errorWidth;
            max-height: @errorWidth;
            margin-left: -(@errorWidth / 2);
            z-index: 10;
            word-wrap: break-word;

            &.closeable {
                //Prevent close icon overlapping the title
                //Can be removed when https://bitbucket.org/atlassian/aui-archive/pull-request/224 is merged
                padding-right: 36px;
            }

        }
    }

    .image-explorer-scale-slider-wrapper {
        display: inline-block;
        width: @slider-width;
        margin: 20px (@slider-icon-width + 5px) 0;
        position: relative;
        height: 20px;
        line-height: 20px;

        &:before,
        &:after {
            .square(@slider-icon-width);
            content: '';
            background-size: @slider-icon-width;
            position: absolute;
            top: 50%;
            margin-top: -@slider-icon-width/2;
            background: transparent no-repeat 50% 50%;
        }

        &:before {
            left: -(@slider-icon-width + 5px);
            background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMC4wMDJweCIgdmlld0JveD0iNTg2IDQxMSAyMCAyMC4wMDIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgNTg2IDQxMSAyMCAyMC4wMDIiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGcgaWQ9IkVsbGlwc2VfMV8xXyI+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiM3MTcxNzEiIGQ9Ik02MDEuNDQ1LDQxNGgtMTAuODljLTAuODU4LDAtMS41NTYsMC42OTYtMS41NTYsMS41NTZ2MTAuODg5YzAsMC44NTksMC42OTcsMS41NTcsMS41NTYsMS41NTdoMTAuODkNCgkJCWMwLjg1NywwLDEuNTU1LTAuNjk3LDEuNTU1LTEuNTU3di0xMC44ODlDNjAzLDQxNC42OTYsNjAyLjMwNCw0MTQsNjAxLjQ0NSw0MTR6IE02MDIsNDI3aC0xMmMtMC4xMzUtMC4wMzEsMC0wLjY3OCwwLTF2LTExDQoJCQljMC0wLjMyMiwwLjA1My0wLjEyNSwwLDBoMTFjMC45MTYsMC4wMzEsMS0wLjE5NywxLDB2MTFDNjAyLDQyNi40NzgsNjAyLjA0MSw0MjYuOTM3LDYwMiw0Mjd6IE01OTYsNDI0bC0yLTRsLTMsM3YzaDEwDQoJCQljLTEuMjQyLTEuNjg4LTMtNC0zLTRMNTk2LDQyNHogTTU5OC41LDQyMGMwLjgyOCwwLDEuNS0wLjY3MiwxLjUtMS41cy0wLjY3Mi0xLjUtMS41LTEuNXMtMS41LDAuNjcyLTEuNSwxLjUNCgkJCVM1OTcuNjcxLDQyMCw1OTguNSw0MjB6Ii8+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=);
        }

        &:after {
            right: -(@slider-icon-width + 5px + 2px); //2px buffer to account padding inside image for :before
            background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSI1ODYgNDExIDIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDU4NiA0MTEgMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGcgaWQ9IkVsbGlwc2VfMSI+DQoJPGc+DQoJCTxwYXRoIGZpbGw9IiM3MTcxNzEiIGQ9Ik02MDQuMzMzLDQxMWgtMTYuNjY3Yy0xLjIyNywwLTEuNjY2LDAuNDM5LTEuNjY2LDEuNjY3djE2LjY2N2MwLDEuMjI3LDAuNDM5LDEuNjY2LDEuNjY2LDEuNjY2aDE2LjY2Nw0KCQkJYzEuMjI3LDAsMS42NjYtMC40MzksMS42NjYtMS42NjZ2LTE2LjY2N0M2MDYsNDExLjQzOSw2MDUuNTYsNDExLDYwNC4zMzMsNDExeiBNNjA0LDQyOWgtMTZ2LTE2aDE2VjQyOXogTTU5OSw0MjFsLTMsM2wtMi02bC01LDUNCgkJCXY1aDE0TDU5OSw0MjF6IE01OTksNDE5YzEuMTA0LDAsMi0wLjg5NiwyLTJzLTAuODk2LTItMi0ycy0yLDAuODk2LTIsMlM1OTcuODk2LDQxOSw1OTksNDE5eiIvPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K);
        }
    }

    .image-explorer-scale-slider,
    .fd-slider {
        padding: 0; //IE10 adds crazy padding to it's native slider element
        margin: 0;
        display: inline-block;
        width: @slider-width;
        vertical-align: middle;

        &.fd-form-element-hidden {
            display: none;
        }
    }

    .fd-slider {
        //Tweak the fd-slider styles so that the handle stops at the end of the bar, rather than stopping when the middle of the handle reaches the end of the bar
        .fd-slider-bar {
            left: 3px;
            right: 3px;
        }

        .fd-slider-range {
            left: 4px;
        }
    }
}


