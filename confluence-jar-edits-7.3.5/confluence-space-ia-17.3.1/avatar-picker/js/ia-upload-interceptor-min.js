define("confluence-space-ia/avatar-picker/upload-interceptor",["jquery","underscore"],function(c,a){function b(d,e){return this.init.apply(this,arguments)}b.prototype.defaults={replacementEl:undefined,clientFileHandler:null};b.prototype.init=function(d,e){a.bindAll(this,"onSelectFile","onReplacementClick");this.$el=c(d);this.options=c.extend({},this.defaults,e);this.$el.on("change",this.onSelectFile);if(this.options.replacementEl){this.$replacement=c(this.options.replacementEl);this.$el.hide();this.$replacement.on("click",this.onReplacementClick)}};b.prototype.onSelectFile=function(d){if(c(d.target).val()&&this.options.clientFileHandler){this.options.clientFileHandler.handleFiles(d.target.files,this.$el)}};b.prototype.onReplacementClick=function(d){d.preventDefault();this.$el.click()};b.prototype.destroy=function(){this.$el.off("change",this.onSelectFile);this.$replacement.off("click",this.onReplacementClick)};return b});