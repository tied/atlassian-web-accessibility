define("confluence-space-ia/avatar-picker/client-file-reader",["jquery","underscore","confluence-space-ia/avatar-picker/client-file-handler"],function(e,d,b){var f=!!(window.File&&window.FileList&&window.FileReader);var c={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};function a(g){if(!a.isSupported()){throw new Error("ClientFileReader requires FileReaderAPI support")}return this.init(g)}a.isSupported=function(){return f};e.extend(a.prototype,b.prototype);a.readMethods={ArrayBuffer:"ArrayBuffer",BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"};a.typeFilters=b.typeFilters;a.prototype.defaults=e.extend({},b.prototype.defaults,{readMethod:a.readMethods.DataURL,onRead:e.noop});a.prototype.init=function(g){b.prototype.init.call(this,g);d.bindAll(this,"onSuccess","readFile");this.options.onSuccess=this.onSuccess;return this};a.prototype.onSuccess=function(h){var g=d.has(c,this.options.readMethod)?c[this.options.readMethod]:undefined;if(g){d.each(h,d.bind(function(j){var i=new FileReader();i.onload=d.bind(this.readFile,this,j);i[g](j)},this))}};a.prototype.readFile=function(g,h){d.isFunction(this.options.onRead)&&this.options.onRead(h.target.result,g)};return a});