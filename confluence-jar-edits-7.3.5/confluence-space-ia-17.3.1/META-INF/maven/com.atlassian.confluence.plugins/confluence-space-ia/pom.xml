<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.atlassian.confluence.plugins</groupId>
        <artifactId>confluence-space-ia-project</artifactId>
        <version>17.3.1</version>
    </parent>

    <artifactId>confluence-space-ia</artifactId>
    <packaging>atlassian-plugin</packaging>

    <name>Confluence Space IA Plugin</name>
    <description>Adds a left sidebar to the Confluence main theme.</description>

    <properties>
        <sonar.coverage.jacoco.xmlReportPaths>${project.basedir}/../${aggregate.report.dir}</sonar.coverage.jacoco.xmlReportPaths>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.atlassian.confluence</groupId>
            <artifactId>confluence</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.confluence.plugins</groupId>
            <artifactId>confluence-api</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.confluence.plugins</groupId>
            <artifactId>confluence-create-content-test-support</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.confluence.plugins</groupId>
            <artifactId>recently-viewed-plugin</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.plugins.rest</groupId>
            <artifactId>atlassian-rest-common</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.activeobjects</groupId>
            <artifactId>activeobjects-plugin</artifactId>
            <scope>provided</scope>
            <!-- TODO : what was this exclusion needed for ? -->
            <exclusions>
                <exclusion>
                    <groupId>com.google.collections</groupId>
                    <artifactId>google-collections</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.atlassian.plugin</groupId>
            <artifactId>atlassian-spring-scanner-annotation</artifactId>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>com.atlassian.lesscss</groupId>
                <artifactId>lesscss-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.atlassian.maven.plugins</groupId>
                <artifactId>confluence-maven-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Atlassian-Plugin-Key>com.atlassian.confluence.plugins.confluence-space-ia
                        </Atlassian-Plugin-Key>

                        <Export-Package>com.atlassian.confluence.plugins.ia*</Export-Package>

                        <!--optionals first, in alphabetic order, followed by mandatories, in alphabetic order-->
                        <Import-Package>
                            bucket.user,
                            com.atlassian.activeobjects.external,
                            com.atlassian.bandana;version="3.1.0",
                            com.atlassian.bonnie;version="6.1.0",
                            com.atlassian.cache;version="2.0.4",
                            com.atlassian.config.*;version="0.19.0",
                            com.atlassian.confluence.api.model.web,
                            com.atlassian.confluence.api.service.web,
                            com.atlassian.confluence.content.render.xhtml,
                            com.atlassian.confluence.content.render.xhtml.links,
                            com.atlassian.confluence.content.render.xhtml.model.inlinetask,
                            com.atlassian.confluence.content.service,
                            com.atlassian.confluence.content.service.comment,
                            com.atlassian.confluence.content.ui,
                            com.atlassian.confluence.core,
                            com.atlassian.confluence.event.events.*,
                            com.atlassian.confluence.labels,
                            com.atlassian.confluence.languages,
                            com.atlassian.confluence.license,
                            com.atlassian.confluence.license.exception,
                            com.atlassian.confluence.mail.notification,
                            com.atlassian.confluence.pages,
                            com.atlassian.confluence.pages.actions,
                            com.atlassian.confluence.pages.persistence.dao,
                            com.atlassian.confluence.plugin.descriptor.web.conditions,
                            com.atlassian.confluence.plugin.descriptor.web.conditions.user,
                            com.atlassian.confluence.plugin.descriptor.web.urlreadingconditions,
                            com.atlassian.confluence.plugins.recentlyviewed,
                            com.atlassian.confluence.renderer,
                            com.atlassian.confluence.renderer.template,
                            com.atlassian.confluence.rpc,
                            com.atlassian.confluence.search.service,
                            com.atlassian.confluence.search.v2,
                            com.atlassian.confluence.search.v2.query,
                            com.atlassian.confluence.search.v2.searchfilter,
                            com.atlassian.confluence.security,
                            com.atlassian.confluence.security.login,
                            com.atlassian.confluence.setup,
                            com.atlassian.confluence.setup.bandana,
                            com.atlassian.confluence.setup.settings,
                            com.atlassian.confluence.spaces,
                            com.atlassian.confluence.spaces.actions,
                            com.atlassian.confluence.status.service,
                            com.atlassian.confluence.status.service.systeminfo,
                            com.atlassian.confluence.themes,
                            com.atlassian.confluence.user,
                            com.atlassian.confluence.user.actions,
                            com.atlassian.confluence.util,
                            com.atlassian.confluence.util.i18n,
                            com.atlassian.confluence.xhtml.api,
                            com.atlassian.core.exception;version="4.6.11",
                            com.atlassian.core.*,
                            com.atlassian.event.*;version="2.3.2",
                            com.atlassian.extras.api.*;version="2.4.0",
                            com.atlassian.fugue;version="1.1.0",
                            com.atlassian.plugin;version="3.0.10",
                            com.atlassian.plugin.osgi.bridge.external,
                            com.atlassian.plugin.predicate;version="3.0.10",
                            com.atlassian.plugin.web.*;version="3.0.0.m9",
                            com.atlassian.plugins.rest.common.*,
                            com.atlassian.renderer;version="6.2.10",
                            com.atlassian.sal.api.*;version="2.10.11",
                            com.atlassian.user.*;version="3.0.0",
                            com.google.common.base,
                            com.google.common.collect,
                            com.google.common.io,
                            com.google.gson,
                            com.opensymphony.module.propertyset,
                            com.opensymphony.webwork,
                            javax.imageio,
                            javax.naming,
                            javax.servlet.http,
                            javax.transaction,
                            javax.ws.rs,
                            javax.ws.rs.core,
                            javax.xml.bind.annotation,
                            javax.xml.stream,
                            net.java.ao,
                            net.sf.hibernate,
                            net.sf.hibernate.cache,
                            net.sf.hibernate.collection,
                            net.sf.hibernate.connection,
                            net.sf.hibernate.dialect,
                            net.sf.hibernate.engine,
                            net.sf.hibernate.exception,
                            net.sf.hibernate.metadata,
                            net.sf.hibernate.persister,
                            net.sf.hibernate.type,
                            org.apache.commons.io;version="2.4",
                            org.apache.commons.lang3,
                            org.j3d.util,
                            org.slf4j,
                            org.springframework.beans.factory,
                            org.springframework.beans.factory.annotation,
                            *;resolution:=optional
                        </Import-Package>

                        <Spring-Context>*</Spring-Context>
                    </instructions>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.atlassian.plugin</groupId>
                <artifactId>atlassian-spring-scanner-maven-plugin</artifactId>
                <version>${atlassian.spring.scanner.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>atlassian-spring-scanner</goal>
                        </goals>
                        <phase>process-classes</phase>
                    </execution>
                </executions>
                <configuration>
                    <verbose>false</verbose>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
