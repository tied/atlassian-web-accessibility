define("confluence-editor/editor/page-editor-permissions",["ajs","jquery"],function(i,e){"use strict";var t={updateEditPageRestrictions:function(t,s,r,n){var a=e("#rte-button-restrictions"),o=a.find(".icon"),c="";if(t||s){var d=t?"aui-iconfont-locked icon-red":"aui-iconfont-unlocked icon-red";o.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass(d),c=i.I18n.getText("page.restrictions.apply")}else o.removeClass("aui-iconfont-locked aui-iconfont-unlocked icon-red").addClass("aui-iconfont-unlocked"),c=r?i.I18n.getText("page.restrictions.apply"):i.I18n.getText("page.restrictions.none");a.attr("data-tooltip",c),a.attr("aria-label",c),a.data("explicit-restrictions",t),a.data("inherited-restrictions",s),a.data("restrictionsHash",n)},handleHeartbeat:function(s,r){if(void 0!==r.restrictionsHash){var n=e("#rte-button-restrictions");if(n.data("restrictionsHash")!==r.restrictionsHash)if(e("#update-page-restrictions-dialog").is(":visible")&&i.PagePermissions.updateRestrictionsDialog)i.PagePermissions.updateRestrictionsDialog(),n.data("restrictionsHash",r.restrictionsHash);else{var a=""!==r.restrictionsHash,o=r.hasViewRestrictions,c=!!n.data("inherited-restrictions");t.updateEditPageRestrictions(o,c,a,r.restrictionsHash)}}},init:function(e){i.bind("editor-heartbeat",t.handleHeartbeat);i.bind("edit-page-restrictions-updated",function(i,e){t.updateEditPageRestrictions(e.hasExplicitRestrictions,e.hasInheritedRestrictions,e.hasAnyExplicitRestrictions,e.restrictionsHash)})}};return t}),require("confluence/module-exporter").safeRequire("confluence-editor/editor/page-editor-permissions",function(i){"use strict";var e=require("ajs"),t=require("jquery");e.PagePermissions=e.PagePermissions||{},t.extend(e.PagePermissions,{updateEditPageRestrictions:i.updateEditPageRestrictions}),e.toInit(i.init)});