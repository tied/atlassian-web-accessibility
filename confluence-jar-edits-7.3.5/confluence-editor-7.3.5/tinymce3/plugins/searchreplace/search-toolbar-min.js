define("confluence-editor/tinymce3/plugins/searchreplace/search-toolbar",["jquery","tinymce","confluence/legacy"],function(f,b,d){return{initContextToolbars:function(h,c){var i=function(a){if(b.isIE)a=a.createTextRange(),a.execCommand("SelectAll"),a.move("textedit"),a.select();else if(b.isGecko){var c=f(a).val().length;a.setSelectionRange(c,c)}},g=function(a){top.focus();b.activeEditor.plugins.customtoolbar.focusToolbarButton(a)},e=function(){top.focus();var a=f("#search-toolbar-find-text");a.focus();
i(a[0])},j=function(){top.focus();var a=f("#search-toolbar-replace-text");a.focus();i(a[0])},l=function(){b.isIE&&frames.wysiwygTextarea_ifr.focus();if(b.isIE||b.isGecko){var a=b.activeEditor;a.focus();a.selection.select(a.getBody());a.selection.collapse(!1);a.focus()}},m=new d.Editor.Toolbar.Components.TextBox({id:"search-toolbar-find-text",text:c.getLang("searchreplace_dlg.findlabel"),name:"find",keydown:function(a){!b.isIE8&&(a.ctrlKey||b.isMac&&a.metaKey)&&70===a.which?a.preventDefault():13===
a.which?(a.preventDefault(),b.activeEditor.execCommand("mceConfSearch",!1,{backwards:!1,onFound:e,onNotFound:e},{skip_undo:!0})):27===a.which&&(a.preventDefault(),b.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0}))},cssClass:"toolbar-find-input"}),n=new d.Editor.Toolbar.Components.TextBox({id:"search-toolbar-replace-text",text:c.getLang("searchreplace_dlg.replacelabel"),name:"replace",keydown:function(a){!b.isIE8&&(a.ctrlKey||b.isMac&&a.metaKey)&&70===a.which?a.preventDefault():
13===a.which?(a.preventDefault(),b.activeEditor.execCommand("mceConfReplace",!1,{onFound:j,onNotFound:e,onInactive:function(){b.activeEditor.execCommand("mceConfSearch",false,{backwards:false,onFound:j,onNotFound:e},{skip_undo:true})}},{skip_undo:!0})):27===a.which&&(a.preventDefault(),b.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0}))},cssClass:"toolbar-replace-input"}),o=new d.Editor.Toolbar.Components.TextButton({text:c.getLang("searchreplace_dlg.findprevious"),click:function(){c.execCommand("mceConfSearch",
!1,{backwards:!0,onFound:function(){top.focus();g("search-toolbar-find-previous-button")},onNotFound:e},{skip_undo:!0})},textClass:"search-toolbar-find-previous-button"}),k=new d.Editor.Toolbar.Components.TextButton({text:b.isIE?c.getLang("searchreplace_dlg.findlabel"):c.getLang("searchreplace_dlg.findnext"),click:function(){c.execCommand("mceConfSearch",!1,{backwards:!1,onFound:function(){top.focus();g("search-toolbar-find-next-button")},onNotFound:e},{skip_undo:!0})},textClass:"search-toolbar-find-next-button"}),
p=new d.Editor.Toolbar.Components.TextButton({text:c.getLang("searchreplace_dlg.replace"),click:function(){c.execCommand("mceConfReplace",!1,{onFound:function(){top.focus();g("search-toolbar-replace-button")},onNotFound:e},{skip_undo:!0})},textClass:"search-toolbar-replace-button"}),q=new d.Editor.Toolbar.Components.TextButton({text:c.getLang("searchreplace_dlg.replaceall"),click:function(){c.execCommand("mceConfReplaceAll",!1,{onReplaced:l,onNotReplaced:e})},textClass:"search-toolbar-replaceall-button"}),
r=new d.Editor.Toolbar.Components.Button({text:c.getLang("searchreplace_dlg.close"),iconClass:"icon aui-icon aui-icon-small aui-iconfont-close-dialog",click:function(){c.execCommand("mceConfSearchClose",!1,null)}});return{Buttons:[new d.Editor.Toolbar.Components.Group([r],{groupClass:"close"}),new d.Editor.Toolbar.Components.Group([m,n],{groupClass:"no-separator"}),new d.Editor.Toolbar.Components.Group(b.isIE?[k]:[o,k]),new d.Editor.Toolbar.Components.Group([p,q])]}}}});
require("confluence/module-exporter").safeRequire("confluence-editor/tinymce3/plugins/searchreplace/search-toolbar",function(f){var b=require("jquery"),d=require("document"),h=require("confluence/legacy");b(d).bind("initContextToolbars.Toolbar",function(b,d){h.Editor.searchToolbar=f.initContextToolbars(b,d)})});