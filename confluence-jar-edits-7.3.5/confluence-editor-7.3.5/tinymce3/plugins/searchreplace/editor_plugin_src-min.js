define("confluence-editor/tinymce3/plugins/searchreplace/editor_plugin_src",["jquery","ajs","confluence/legacy","document","tinymce"],function(f,g,c,l,e){var i=null,j=!1,h=function(c,b){b.preventDefault();b.stopPropagation()},m=function(c,b){h(c,b);var a=b.which;a||(a=b.charCode?b.charCode:b.keyCode);48>a||i.push(a)},k=function(c){var b=f("#rte-button-searchreplace a");b.length&&(c?b.unbind("click",!1):b.bind("click",!1))};return{init:function(d){d.addCommand("mceSearchReplaceToolbar",function(){if(!j){j=
!0;var b=f("#rte-button-searchreplace"),a=!b.hasClass("active"),d=f("body"),d=!d.hasClass("no-tools")||d.hasClass("no-tools-toolbars-visible");a?(b.addClass("active"),c.Editor.searchManager||(c.Editor.searchManager=new c.Editor.SearchManager("searchreplace")),f(l).trigger("createContextToolbarRow.Toolbar",{id:"searchreplace",buttons:c.Editor.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:d,onVisible:function(){var a;a=g.Rte.getEditor();a.onKeyDown.remove(m);a.onKeyPress.remove(h);a.onKeyUp.remove(h);
var b="";for(a=0;a<i.length;a++){var d;d=i[a];if(d>65535){d=d-65536;d=String.fromCharCode(55296+(d>>10),56320+(d&1023))}else d=String.fromCharCode(d);b=b+d}a=b.toLowerCase();c.Editor.searchManager.onVisible(a);k(true);j=false;c.Editor.searchManager.initialised=true}}).trigger("enableContextToolbarRow.Toolbar"),b=g.Rte.getEditor(),i=[],b.onKeyDown.add(m),b.onKeyPress.add(h),b.onKeyUp.add(h),c.Editor.searchManager.init(),k(!1)):(b.removeClass("active"),c.Editor.searchManager.onHide(),f(l).trigger("removeContextToolbarRow.Toolbar",
{id:"searchreplace",animate:d,onHide:function(){f(l).trigger("contextToolbarRowRemoved.Toolbar");k(!0);j=!1;c.Editor.searchManager.initialised=!1}}),k(!1),e.isGecko||frames.wysiwygTextarea_ifr.focus(),e.activeEditor.focus())}});d.addCommand("mceConfSearch",function(b,a){c.Editor.searchManager&&(a=a||{},a.backwards&&!e.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button")?c.Editor.searchManager.focus():!a.backwards&&!e.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button")?
c.Editor.searchManager.focus():c.Editor.searchManager.find(a.backwards,a.onFound,a.onNotFound))});d.addCommand("mceConfReplace",function(b,a){c.Editor.searchManager&&(a=a||{},e.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replace-button")?c.Editor.searchManager.replace(a.onFound,a.onNotFound):a.onInactive&&a.onInactive())});d.addCommand("mceConfReplaceAll",function(b,a){c.Editor.searchManager&&(a=a||{},e.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&
c.Editor.searchManager.replaceAll(a.onReplaced,a.onNotReplaced))});d.addCommand("mceConfSearchClose",function(){c.Editor.searchManager&&d.execCommand("mceSearchReplaceToolbar",!1,null)});d.addButton("searchreplace",{title:"searchreplace.search_desc",cmd:"mceSearchReplaceToolbar"});e.isIE8||d.addShortcut("ctrl+f","searchreplace.search_desc",function(){c.Editor.searchManager&&c.Editor.searchManager.isVisible()?c.Editor.searchManager.focus():d.execCommand("mceSearchReplaceToolbar",!1,!1,{skip_undo:!0})})},
getInfo:function(){return{longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:e.majorVersion+"."+e.minorVersion}}}});require("confluence/module-exporter").safeRequire("confluence-editor/tinymce3/plugins/searchreplace/editor_plugin_src",function(f){var g=require("tinymce");g.create("tinymce.plugins.AtlassianSearchReplacePlugin",f);g.PluginManager.add("searchreplace",g.plugins.AtlassianSearchReplacePlugin)});