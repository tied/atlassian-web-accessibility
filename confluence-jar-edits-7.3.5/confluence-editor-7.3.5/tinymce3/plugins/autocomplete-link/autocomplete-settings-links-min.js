define("confluence-editor/tinymce3/plugins/autocomplete-link/autocomplete-settings-links",["jquery","ajs","confluence/legacy"],function(k,d,e){return function(){var h=e.Editor.Autocompleter,i=function(a){return a?d.contextPath()+"/rest/prototype/1/search.json":d.Meta.get("remote-user")?d.contextPath()+"/rest/prototype/1/session/history.json":null},j=function(a,b){var c={"max-results":a.maxResults};b&&(c.query=e.unescapeEntities(b),c.search="name",c.preferredSpaceKey=d.Meta.get("space-key"));return c};
e.Editor.Autocompleter.Settings["["]={ch:"[",cache:!1,endChars:["]"],dropDownClassName:"autocomplete-links",selectFirstItem:!0,getHeaderText:function(){return d.I18n.getText("editor.autocomplete.links.header.text")},getAdditionalLinks:function(a,b,c){b?(a=d.I18n.getText("editor.autocomplete.links.dialog.search"),a=d.format(a,b)):a=d.I18n.getText("editor.autocomplete.links.dialog.search.no.text");var f=e.Editor.LinkBrowser,a=[{className:"search-for",name:a,href:"#",callback:function(a){a.replaceWithSelectedSearchText();
a=f.open({panelKey:f.SEARCH_PANEL});a.doSearch(a.getLocationPresenter().getRawLinkText())}},{className:"dropdown-insert-link",html:h.Util.dropdownLink(d.I18n.getText("editor.autocomplete.links.web.link"),"dropdown-prevent-highlight","editor-icon"),callback:function(a){a.replaceWithSelectedSearchText();f.open({panelKey:f.WEBLINK_PANEL})}}];c&&c(b,a);return a},getDataAndRunCallback:function(a,b,c){e.Editor.Autocompleter.Util.getRestData(a,i,j,b,c,"content",function(a,b,c){if(b){var g;if(!(g=2>a.length))a=
a[1][0].restObj,a="page"===a.type?a.space.key==d.Meta.get("space-key")&&a.title.toLowerCase()===b.toLowerCase():!1,g=!a;g&&c.push({className:"insert-create-page-link",html:h.Util.dropdownLink(d.I18n.getText("editor.autocomplete.links.create.link"),"dropdown-prevent-highlight","editor-icon"),callback:function(a){var c=e.unescapeEntities(b),c=e.Link.createLinkToNewPage(c,d.Meta.get("space-key"));a.update(c)}})}})},update:function(a,b){b.restObj&&(b=e.Link.fromREST(b.restObj));b.insert()}}}});